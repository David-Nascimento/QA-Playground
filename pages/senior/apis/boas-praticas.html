<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Boas Pr√°ticas para QA ‚Äî APIs e Autentica√ß√£o ‚Äî QA Playground</title>
    <link rel="stylesheet" href="../../../css/main.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="et-header">
      <div class="et-header-inner">
        <a href="../../../index.html" class="et-logo" aria-label="In√≠cio">
          <img src="../../../assets/icons/logo.svg" alt="Logo QA Playground" height="40" />
        </a>
        <nav class="et-nav" aria-label="Navega√ß√£o principal">
          <ul class="et-nav-list">
            <li><a href="../../../index.html">In√≠cio</a></li>
            <li><a href="index.html">APIs</a></li>
          </ul>
        </nav>
        <div class="et-header-actions">
          <button id="theme-toggle" aria-label="Alternar tema">üåû</button>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="section">
        <div class="section-header">
          <h2>Boas Pr√°ticas para QA</h2>
          <div class="section-desc">Como escrever casos de teste, estruturar cole√ß√µes Postman, organizar ambientes e reportar bugs de API corretamente.</div>
        </div>

        <div class="info-box">
          <h3>Como escrever casos de teste de API</h3>
          
          <div style="margin-top: var(--spacing-md);">
            <h4>Estrutura do caso de teste</h4>
            <p>Documente caso de teste de forma clara e reproduz√≠vel:</p>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>ID e t√≠tulo:</strong> Identificador √∫nico e descri√ß√£o clara do cen√°rio</li>
              <li><strong>Pr√©-condi√ß√µes:</strong> Dados necess√°rios no sistema, autentica√ß√£o requerida, estado inicial do sistema</li>
              <li><strong>Dados de entrada:</strong> Endpoint completo, m√©todo HTTP, headers (Authorization, Content-Type, etc.), request body (JSON completo), query parameters</li>
              <li><strong>A√ß√£o:</strong> Executar requisi√ß√£o HTTP com dados especificados</li>
              <li><strong>Resultado esperado:</strong> Status code HTTP, estrutura do response body (schema), valores espec√≠ficos esperados, headers de resposta relevantes</li>
              <li><strong>Valida√ß√µes:</strong> Conformidade com schema (JSON Schema), tipos de dados corretos, regras de neg√≥cio aplicadas, headers obrigat√≥rios presentes</li>
              <li><strong>P√≥s-condi√ß√µes:</strong> Estado do sistema ap√≥s execu√ß√£o, dados criados/modificados</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Valida√ß√µes essenciais em cada teste</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Status code:</strong> C√≥digo HTTP correto conforme especifica√ß√£o (200, 201, 400, 401, etc.)</li>
              <li><strong>Schema validation:</strong> Estrutura JSON conforme contrato (OpenAPI, JSON Schema), tipos de dados corretos</li>
              <li><strong>Valores espec√≠ficos:</strong> IDs retornados, timestamps, valores calculados, campos gerados pelo servidor</li>
              <li><strong>Headers:</strong> Content-Type correto, Location (quando aplic√°vel), Cache-Control, ETag, X-RateLimit-*</li>
              <li><strong>Performance:</strong> Tempo de resposta dentro dos limites aceit√°veis</li>
              <li><strong>Idempot√™ncia:</strong> Quando aplic√°vel, validar que requisi√ß√µes id√™nticas produzem mesmo resultado</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Cen√°rios obrigat√≥rios a cobrir</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Happy path:</strong> Fluxo principal com dados v√°lidos, todas as condi√ß√µes ideais</li>
              <li><strong>Valida√ß√µes de entrada:</strong> Campos obrigat√≥rios ausentes, tipos incorretos, formatos inv√°lidos, valores fora de range</li>
              <li><strong>Erros esperados:</strong> 400 (bad request), 401 (unauthorized), 403 (forbidden), 404 (not found), 409 (conflict), 422 (validation failed), 429 (rate limit)</li>
              <li><strong>Edge cases:</strong> Valores limites (min, max), strings vazias, null, arrays vazios, objetos vazios</li>
              <li><strong>Testes negativos:</strong> Payload malformado, autentica√ß√£o inv√°lida, permiss√µes insuficientes, inje√ß√£o de c√≥digo</li>
              <li><strong>Concorr√™ncia:</strong> Requisi√ß√µes simult√¢neas, race conditions, atualiza√ß√µes concorrentes</li>
            </ul>
          </div>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Como estruturar cole√ß√µes (Postman / Insomnia)</h3>
          
          <div style="margin-top: var(--spacing-md);">
            <h4>Organiza√ß√£o</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Por funcionalidade:</strong> Users, Products, Orders (agrupa endpoints relacionados)</li>
              <li><strong>Por endpoint:</strong> GET /users, POST /users, PUT /users/:id</li>
              <li><strong>Por fluxo de neg√≥cio:</strong> Criar usu√°rio ‚Üí Atualizar ‚Üí Deletar</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Vari√°veis</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Base URL:</strong> <code>{{baseUrl}}</code> (ex: https://api.example.com)</li>
              <li><strong>Tokens:</strong> <code>{{accessToken}}</code> (atualizado automaticamente)</li>
              <li><strong>IDs din√¢micos:</strong> <code>{{userId}}</code> (salvo de resposta anterior)</li>
              <li><strong>Dados de teste:</strong> <code>{{testEmail}}</code>, <code>{{testPassword}}</code></li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Ambientes</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Dev:</strong> Desenvolvimento (dados de teste, menos restritivo)</li>
              <li><strong>QA:</strong> Testes (dados isolados, limpos periodicamente)</li>
              <li><strong>Staging:</strong> Pr√©-produ√ß√£o (dados mais pr√≥ximos de prod)</li>
              <li><strong>Production:</strong> Apenas leitura (GET apenas, sem modifica√ß√µes)</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Testes automatizados</h4>
            <p>Implemente valida√ß√µes autom√°ticas em cada requisi√ß√£o para garantir qualidade e reduzir trabalho manual:</p>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Assertions:</strong> Validar status code, schema JSON, tipos de dados, valores espec√≠ficos, headers obrigat√≥rios, tempo de resposta</li>
              <li><strong>Scripts (Pre-request):</strong> Gerar dados din√¢micos, calcular timestamps, criar tokens tempor√°rios, preparar payloads</li>
              <li><strong>Scripts (Tests):</strong> Extrair valores da resposta (tokens, IDs), salvar em vari√°veis de ambiente, executar l√≥gica condicional, validar regras de neg√≥cio</li>
              <li><strong>Chain de requests:</strong> Usar resposta de uma requisi√ß√£o na pr√≥xima (ex: criar usu√°rio ‚Üí usar ID para atualizar ‚Üí deletar)</li>
              <li><strong>Valida√ß√£o de schema:</strong> Validar estrutura JSON contra JSON Schema ou OpenAPI contract</li>
              <li><strong>Valida√ß√£o de performance:</strong> Verificar tempo de resposta dentro de limites aceit√°veis</li>
            </ul>
            
            <div style="margin-top: var(--spacing-md); padding: var(--spacing-md); background: rgba(0,0,0,0.05); border-radius: var(--border-radius-sm);">
              <p style="margin-bottom: var(--spacing-sm);"><strong>Exemplo: Postman Test Script Completo</strong></p>
              <pre style="background: var(--bg); padding: var(--spacing-md); border-radius: var(--border-radius-sm); overflow-x: auto; font-size: var(--font-size-sm); margin-top: var(--spacing-sm);"><code>// Valida√ß√µes b√°sicas
pm.test('Status code is 201', () => {
    pm.response.to.have.status(201);
});

pm.test('Response time < 500ms', () => {
    pm.expect(pm.response.responseTime).to.be.below(500);
});

// Valida√ß√£o de schema
pm.test('Response has correct structure', () => {
    const jsonData = pm.response.json();
    pm.expect(jsonData).to.have.property('data');
    pm.expect(jsonData.data).to.have.property('id');
    pm.expect(jsonData.data).to.have.property('name');
    pm.expect(jsonData.data).to.have.property('email');
});

// Extrair e salvar valores
const userId = pm.response.json().data.id;
pm.environment.set('createdUserId', userId);

// Valida√ß√£o de regra de neg√≥cio
pm.test('Email format is valid', () => {
    const email = pm.response.json().data.email;
    pm.expect(email).to.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);
});

// Valida√ß√£o de headers
pm.test('Location header present', () => {
    pm.expect(pm.response.headers.get('Location')).to.exist;
});</code></pre>
            </div>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Documenta√ß√£o</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li>Descri√ß√£o do endpoint e prop√≥sito</li>
              <li>Exemplos de requisi√ß√£o e resposta</li>
              <li>Pr√©-requisitos (autentica√ß√£o, dados necess√°rios)</li>
              <li>Poss√≠veis erros e como resolver</li>
            </ul>
          </div>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Como organizar ambientes</h3>
          
          <div style="margin-top: var(--spacing-md);">
            <h4>Separa√ß√£o de ambientes</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Dev:</strong> Desenvolvimento ativo, dados podem ser resetados</li>
              <li><strong>QA:</strong> Testes manuais e automatizados, dados isolados</li>
              <li><strong>Staging:</strong> Pr√©-produ√ß√£o, valida√ß√£o final antes de deploy</li>
              <li><strong>Production:</strong> Ambiente real, apenas leitura para testes</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Dados de teste</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li>Dados isolados por ambiente (n√£o compartilhar entre Dev e QA)</li>
              <li>Limpeza peri√≥dica (evitar ac√∫mulo de dados de teste)</li>
              <li>Seed scripts para popular dados iniciais</li>
              <li>Dados conhecidos e documentados (ex: usu√°rio admin padr√£o)</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Configura√ß√£o</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li>Vari√°veis de ambiente (URLs, credenciais)</li>
              <li>Secrets gerenciados (n√£o commitar no c√≥digo)</li>
              <li>Documenta√ß√£o de acesso (como obter credenciais)</li>
              <li>Versionamento de APIs (v1, v2, etc.)</li>
            </ul>
          </div>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Como reportar bugs de API corretamente</h3>
          
          <div style="margin-top: var(--spacing-md);">
            <h4>Informa√ß√µes obrigat√≥rias no bug report</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Endpoint completo:</strong> <code>POST /api/v1/users</code> (incluir vers√£o da API se aplic√°vel)</li>
              <li><strong>M√©todo HTTP:</strong> GET, POST, PUT, PATCH, DELETE, etc.</li>
              <li><strong>Headers enviados:</strong> Content-Type, Authorization, Accept, X-API-Key, etc. (valores mascarados se sens√≠veis)</li>
              <li><strong>Request body:</strong> JSON completo formatado, sem dados sens√≠veis (senhas, tokens completos)</li>
              <li><strong>Query parameters:</strong> Todos os par√¢metros enviados na URL</li>
              <li><strong>Base URL:</strong> Ambiente e dom√≠nio completo</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Resposta recebida (completa)</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Status code:</strong> C√≥digo HTTP recebido (400, 500, etc.)</li>
              <li><strong>Response headers:</strong> Content-Type, Location, X-RateLimit-*, Retry-After, etc.</li>
              <li><strong>Response body:</strong> JSON completo de erro ou resposta inesperada (formatado para legibilidade)</li>
              <li><strong>Response time:</strong> Tempo de resposta em milissegundos (especialmente se muito lento ou timeout)</li>
              <li><strong>Timestamp:</strong> Data e hora exata da requisi√ß√£o (UTC)</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Comportamento esperado vs atual</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Comportamento esperado:</strong> O que deveria acontecer conforme documenta√ß√£o (OpenAPI/Swagger), contrato ou especifica√ß√£o</li>
              <li><strong>Comportamento atual:</strong> O que realmente aconteceu, descrito de forma objetiva</li>
              <li><strong>Evid√™ncias:</strong> Screenshots de ferramentas (Postman, Insomnia), logs do servidor (se dispon√≠vel), curl command completo, response salvo em arquivo</li>
              <li><strong>Impacto:</strong> Como o bug afeta usu√°rios, integra√ß√µes ou processos de neg√≥cio</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Contexto e reprodutibilidade</h4>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Ambiente:</strong> Dev, QA, Staging, Production (especificar vers√£o se aplic√°vel)</li>
              <li><strong>Dados de teste:</strong> IDs, emails, tokens (mascarados) usados na reprodu√ß√£o</li>
              <li><strong>Passos para reproduzir:</strong> Sequ√™ncia numerada, clara e completa (incluir pr√©-condi√ß√µes)</li>
              <li><strong>Frequ√™ncia:</strong> Sempre (100%), √†s vezes (intermitente), primeira vez, ap√≥s a√ß√£o espec√≠fica</li>
              <li><strong>Workaround:</strong> Se existe forma de contornar o problema temporariamente</li>
            </ul>
          </div>

          <div style="margin-top: var(--spacing-md);">
            <h4>Classifica√ß√£o de severidade</h4>
            <p>Baseie severidade no impacto no neg√≥cio e usu√°rios, n√£o apenas no tipo t√©cnico do erro:</p>
            <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
              <li><strong>Bloqueante (P0):</strong> Impede uso completo da funcionalidade, sem workaround vi√°vel</li>
              <li><strong>Alta (P1):</strong> Impacto significativo na funcionalidade, mas h√° workaround ou funcionalidade parcial funciona</li>
              <li><strong>M√©dia (P2):</strong> Impacto moderado, funcionalidade parcial ou degradada, workaround dispon√≠vel</li>
              <li><strong>Baixa (P3):</strong> Impacto m√≠nimo, quest√£o cosm√©tica, erro em caso edge, n√£o afeta fluxo principal</li>
            </ul>
            <p style="margin-top: var(--spacing-sm);"><strong>Exemplo:</strong> Erro 500 em endpoint cr√≠tico de pagamento = Bloqueante. Erro 500 em endpoint de relat√≥rio opcional = Alta ou M√©dia dependendo do uso.</p>
          </div>
        </div>

        <div style="margin-top: var(--spacing-xl); display: flex; gap: var(--spacing-md); justify-content: space-between; flex-wrap: wrap;">
          <a href="performance.html" class="btn btn-secondary">‚Üê Anterior: Performance</a>
          <a href="index.html" class="btn">Voltar ao √çndice</a>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      QA Playground ‚Äî Projeto educacional ‚Ä¢ Portugu√™s
    </footer>

    <script type="module" src="../../../js/index.js"></script>
  </body>
</html>
