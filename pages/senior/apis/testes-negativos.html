<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Testes Negativos ‚Äî APIs e Autentica√ß√£o ‚Äî QA Playground</title>
    <link rel="stylesheet" href="../../../css/main.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="et-header">
      <div class="et-header-inner">
        <a href="../../../index.html" class="et-logo" aria-label="In√≠cio">
          <img src="../../../assets/icons/logo.svg" alt="Logo QA Playground" height="40" />
        </a>
        <nav class="et-nav" aria-label="Navega√ß√£o principal">
          <ul class="et-nav-list">
            <li><a href="../../../index.html">In√≠cio</a></li>
            <li><a href="index.html">APIs</a></li>
          </ul>
        </nav>
        <div class="et-header-actions">
          <button id="theme-toggle" aria-label="Alternar tema">üåû</button>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="section">
        <div class="section-header">
          <h2>Testes Negativos (QA Mindset)</h2>
          <div class="section-desc">Exemplos pr√°ticos de cen√°rios que devem ser testados: payload inv√°lido, campos ausentes, inje√ß√£o, valores extremos e mais.</div>
        </div>

        <div class="info-box">
          <h3>Payload Inv√°lido</h3>
          <p>Teste requisi√ß√µes com JSON malformado, estrutura incorreta ou tipos incompat√≠veis. API deve rejeitar com mensagem clara sem processar dados inv√°lidos.</p>
          <p><strong>Cen√°rios de teste:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>JSON sintaticamente inv√°lido: <code>{"name": "Jo√£o",}</code> (v√≠rgula trailing)</li>
            <li>Tipos incompat√≠veis: <code>{"age": "30"}</code> quando espera number</li>
            <li>Estrutura incorreta: <code>{"user": []}</code> quando espera objeto</li>
            <li>JSON malformado: <code>{"name": "Jo√£o"</code> (chave n√£o fechada)</li>
            <li>Caracteres de controle: <code>{"name": "Jo√£o\n\0"}</code></li>
            <li>Encoding incorreto: bytes inv√°lidos em UTF-8</li>
          </ul>
          <p><strong>Resultado esperado:</strong> 400 Bad Request com mensagem indicando erro de parsing, sem expor stack trace ou detalhes internos.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Campos Ausentes</h3>
          <p>Campos obrigat√≥rios n√£o enviados, campos opcionais com null vs ausente.</p>
          <p><strong>Testes:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Enviar sem campo obrigat√≥rio (ex: email ausente)</li>
            <li>Enviar null em campo obrigat√≥rio</li>
            <li>Enviar string vazia em campo obrigat√≥rio</li>
            <li>Campo opcional ausente vs null (comportamento pode diferir)</li>
          </ul>
          <p><strong>Resultado esperado:</strong> 422 Unprocessable Entity com lista de campos ausentes.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Tipos Errados</h3>
          <p>String em campo num√©rico, array em campo string, objeto em campo primitivo.</p>
          <p><strong>Exemplos:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li><code>{"age": "trinta"}</code> (string em campo number)</li>
            <li><code>{"tags": "tag1"}</code> (string em campo array)</li>
            <li><code>{"id": {"value": 123}}</code> (objeto em campo number)</li>
          </ul>
          <p><strong>Resultado esperado:</strong> 400 ou 422 com mensagem indicando tipo incorreto.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Token Expirado</h3>
          <p>Access token expirado, refresh token expirado, comportamento esperado.</p>
          <p><strong>Testes:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Usar access token ap√≥s expira√ß√£o (401)</li>
            <li>Refresh token expirado (401, deve exigir novo login)</li>
            <li>Token sem claim exp (deve rejeitar ou aceitar indefinidamente?)</li>
          </ul>
          <p><strong>Resultado esperado:</strong> 401 Unauthorized com mensagem sobre token expirado.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Permiss√µes Insuficientes</h3>
          <p>Usu√°rio sem role adequado, recurso de outro usu√°rio, escopo OAuth insuficiente.</p>
          <p><strong>Testes:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Usu√°rio comum tentando acessar recurso admin (403)</li>
            <li>Usu√°rio A tentando acessar recurso do usu√°rio B (403)</li>
            <li>Token OAuth sem escopo necess√°rio (403)</li>
            <li>API Key sem permiss√£o para endpoint (403)</li>
          </ul>
          <p><strong>Resultado esperado:</strong> 403 Forbidden com mensagem clara sobre falta de permiss√£o.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Inje√ß√£o de C√≥digo e Path Traversal</h3>
          <p>Teste prote√ß√£o contra inje√ß√£o de c√≥digo malicioso atrav√©s de par√¢metros n√£o sanitizados. Valide que entrada do usu√°rio n√£o √© executada como c√≥digo.</p>
          <p><strong>Cen√°rios de teste:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li><strong>SQL Injection:</strong> <code>?filter=1' OR '1'='1</code> ou <code>?id=1; DROP TABLE users--</code></li>
            <li><strong>NoSQL Injection:</strong> <code>{"$where": "this.password == this.username"}</code> ou <code>{"age": {"$gt": ""}}</code></li>
            <li><strong>XSS (Stored):</strong> <code>{"name": "<script>alert('XSS')</script>"}</code> ‚Üí Validar sanitiza√ß√£o no armazenamento</li>
            <li><strong>Path Traversal:</strong> <code>/api/files/../../../etc/passwd</code> ou <code>?file=../../config.json</code></li>
            <li><strong>Command Injection:</strong> <code>{"command": "rm -rf /"}</code> ou <code>?exec=ls; cat /etc/passwd</code></li>
            <li><strong>LDAP Injection:</strong> <code>?filter=(cn=*)(|(userPassword=*))</code></li>
          </ul>
          <p><strong>Resultado esperado:</strong> 400 Bad Request com rejei√ß√£o clara, ou sanitiza√ß√£o adequada que remove/escapa caracteres perigosos. Nunca executar c√≥digo fornecido pelo cliente.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Valores Extremos</h3>
          <p>Strings muito longas, n√∫meros negativos onde n√£o permitido, arrays vazios, null em campos obrigat√≥rios.</p>
          <p><strong>Exemplos:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>String de 10.000 caracteres em campo com limite de 100</li>
            <li>Idade negativa: <code>{"age": -5}</code></li>
            <li>Array vazio em campo que requer pelo menos 1 item</li>
            <li>Null em campo obrigat√≥rio</li>
            <li>N√∫mero muito grande (overflow)</li>
          </ul>
          <p><strong>Resultado esperado:</strong> 422 com mensagem sobre limites ou formato inv√°lido.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Encoding Incorreto</h3>
          <p>Caracteres especiais, emojis, encoding UTF-8 vs Latin-1.</p>
          <p><strong>Testes:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Caracteres especiais: <code>{"name": "Jo√£o & Maria"}</code></li>
            <li>Emojis: <code>{"name": "Jo√£o üòÄ"}</code></li>
            <li>Encoding misto (UTF-8 e Latin-1)</li>
            <li>Caracteres de controle</li>
          </ul>
          <p><strong>Resultado esperado:</strong> Aceitar UTF-8 corretamente ou 400 se encoding inv√°lido.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Headers Ausentes/Incorretos</h3>
          <p>Content-Type ausente, Accept incorreto, Authorization malformado.</p>
          <p><strong>Testes:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>POST sem Content-Type (400)</li>
            <li>Content-Type incorreto (ex: text/plain em endpoint JSON) (400 ou 415)</li>
            <li>Accept: application/xml em endpoint JSON (406 ou 200 com formato diferente)</li>
            <li>Authorization malformado (ex: "Bearer" sem token) (401)</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>M√©todos N√£o Permitidos</h3>
          <p>POST em endpoint GET-only, DELETE sem permiss√£o, OPTIONS n√£o implementado.</p>
          <p><strong>Testes:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>POST em endpoint que s√≥ aceita GET (405)</li>
            <li>DELETE em recurso sem permiss√£o (405 ou 403)</li>
            <li>OPTIONS n√£o implementado (405 ou 200 com Allow header)</li>
            <li>M√©todo customizado n√£o suportado (405)</li>
          </ul>
          <p><strong>Resultado esperado:</strong> 405 Method Not Allowed com header Allow listando m√©todos v√°lidos.</p>
        </div>

        <div style="margin-top: var(--spacing-xl); display: flex; gap: var(--spacing-md); justify-content: space-between; flex-wrap: wrap;">
          <a href="autenticacao.html" class="btn btn-secondary">‚Üê Anterior: Autentica√ß√£o</a>
          <a href="performance.html" class="btn">Pr√≥ximo: Performance</a>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      QA Playground ‚Äî Projeto educacional ‚Ä¢ Portugu√™s
    </footer>

    <script type="module" src="../../../js/index.js"></script>
  </body>
</html>
