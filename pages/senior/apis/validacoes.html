<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Valida√ß√µes Essenciais ‚Äî APIs e Autentica√ß√£o ‚Äî QA Playground</title>
    <link rel="stylesheet" href="../../../css/main.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="et-header">
      <div class="et-header-inner">
        <a href="../../../index.html" class="et-logo" aria-label="In√≠cio">
          <img src="../../../assets/icons/logo.svg" alt="Logo QA Playground" height="40" />
        </a>
        <nav class="et-nav" aria-label="Navega√ß√£o principal">
          <ul class="et-nav-list">
            <li><a href="../../../index.html">In√≠cio</a></li>
            <li><a href="index.html">APIs</a></li>
          </ul>
        </nav>
        <div class="et-header-actions">
          <button id="theme-toggle" aria-label="Alternar tema">üåû</button>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="section">
        <div class="section-header">
          <h2>Valida√ß√µes Essenciais em Testes de API</h2>
          <div class="section-desc">Checklist pr√°tico para garantir cobertura completa em testes de API: schema, tipos, campos, regras de neg√≥cio e mais.</div>
        </div>

        <div class="info-box">
          <h3>Valida√ß√£o de Contrato (Schema)</h3>
          <p>Valida√ß√£o contra contrato formal define estrutura esperada, tipos de dados e regras. Utilize JSON Schema, OpenAPI/Swagger, ou contrato definido pela equipe.</p>
          <p><strong>Valida√ß√µes obrigat√≥rias:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Estrutura do JSON conforme schema (propriedades, objetos aninhados, arrays)</li>
            <li>Tipos de dados corretos (string, number, integer, boolean, array, object, null)</li>
            <li>Campos obrigat√≥rios presentes (required array validado)</li>
            <li>Campos opcionais tratados corretamente (ausentes vs null vs valores default)</li>
            <li>Formatos validados (date, email, uri, uuid, regex patterns)</li>
            <li>Constraints aplicadas (min/max length, min/max value, enum values)</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Tipos de Dados e Convers√µes</h3>
          <p>Valide tratamento correto de tipos primitivos e convers√µes impl√≠citas. APIs devem rejeitar tipos incompat√≠veis ou converter explicitamente quando aplic√°vel.</p>
          <p><strong>Cen√°rios de teste:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>String em campo num√©rico: <code>{"age": "30"}</code> ‚Üí 400 Bad Request ou convers√£o expl√≠cita</li>
            <li>N√∫mero em campo string: <code>{"id": 123}</code> ‚Üí Aceitar com convers√£o ou rejeitar</li>
            <li>Array vazio em campo que requer elementos: <code>{"tags": []}</code> ‚Üí 422 se minItems > 0</li>
            <li>Objeto aninhado com estrutura incorreta: <code>{"address": "string"}</code> ‚Üí 400 se espera objeto</li>
            <li>Null em campo n√£o-nullable: <code>{"name": null}</code> ‚Üí 400 Bad Request</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Campos Obrigat√≥rios e Opcionais</h3>
          <p>Valide comportamento quando campos obrigat√≥rios est√£o ausentes e tratamento de campos opcionais. Distinga entre campo ausente, null e string vazia.</p>
          <p><strong>Cen√°rios de teste:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Campo obrigat√≥rio ausente: <code>{}</code> sem "email" ‚Üí 422 Unprocessable Entity</li>
            <li>Campo obrigat√≥rio null: <code>{"email": null}</code> ‚Üí 400 Bad Request</li>
            <li>Campo opcional ausente: <code>{"email": "test@example.com"}</code> sem "phone" ‚Üí 200 OK</li>
            <li>Campo opcional null: <code>{"phone": null}</code> ‚Üí 200 OK ou 400 dependendo da pol√≠tica</li>
            <li>String vazia vs ausente: <code>{"name": ""}</code> vs <code>{}</code> ‚Üí Comportamento documentado</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Regras de Neg√≥cio</h3>
          <p>Valida√ß√µes customizadas que implementam l√≥gica de dom√≠nio al√©m de valida√ß√£o estrutural. Teste constraints de unicidade, ranges, formatos espec√≠ficos e relacionamentos.</p>
          <p><strong>Cen√°rios de teste:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Email duplicado: <code>{"email": "existente@example.com"}</code> ‚Üí 409 Conflict</li>
            <li>Data futura inv√°lida: <code>{"birthDate": "2050-01-01"}</code> ‚Üí 422 Unprocessable Entity</li>
            <li>Valor fora de range: <code>{"age": -5}</code> ou <code>{"age": 150}</code> ‚Üí 422</li>
            <li>Formato inv√°lido: <code>{"cpf": "123"}</code> ‚Üí 422 com mensagem espec√≠fica</li>
            <li>Relacionamento inv√°lido: <code>{"categoryId": 999}</code> ‚Üí 422 ou 404 dependendo da implementa√ß√£o</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Mensagens de Erro</h3>
          <p>Mensagens devem ser claras, acion√°veis e n√£o expor detalhes t√©cnicos ou estrutura interna. Formato consistente facilita tratamento pelo cliente.</p>
          <p><strong>Boas pr√°ticas:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li><strong>Boa:</strong> <code>{"error": "Email j√° est√° em uso", "field": "email"}</code></li>
            <li><strong>Ruim:</strong> <code>{"error": "UNIQUE constraint failed: users.email"}</code></li>
            <li><strong>Boa:</strong> <code>{"errors": [{"field": "age", "message": "Idade deve estar entre 0 e 120"}]}</code></li>
            <li><strong>Ruim:</strong> <code>{"error": "ValidationError: age must be >= 0"}</code></li>
          </ul>
          <p><strong>Estrutura recomendada:</strong> Objeto com array de erros, cada erro contendo campo, c√≥digo, mensagem e valor recebido quando aplic√°vel.</p>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Headers Obrigat√≥rios</h3>
          <p>Valide presen√ßa e formato de headers cr√≠ticos: Content-Type (formato do body), Authorization (credenciais), Accept (formato esperado na resposta).</p>
          <p><strong>Cen√°rios de teste:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>POST sem Content-Type ‚Üí 400 Bad Request ou 415 Unsupported Media Type</li>
            <li>Content-Type incorreto: <code>text/plain</code> em endpoint JSON ‚Üí 400 ou 415</li>
            <li>Requisi√ß√£o sem Authorization ‚Üí 401 Unauthorized</li>
            <li>Accept: <code>application/xml</code> em endpoint JSON ‚Üí 406 Not Acceptable ou 200 com formato diferente</li>
            <li>Authorization malformado ‚Üí 401 com WWW-Authenticate header</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Pagina√ß√£o</h3>
          <p>Implementa√ß√£o de pagina√ß√£o previne sobrecarga e timeouts. Valide par√¢metros (page, limit, offset), metadata retornada e comportamento com valores inv√°lidos.</p>
          <p><strong>Valida√ß√µes obrigat√≥rias:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Total de registros retornado (total, count) para c√°lculo de p√°ginas</li>
            <li>Metadata de pagina√ß√£o (current_page, per_page, total_pages)</li>
            <li>Links de navega√ß√£o (first, last, next, prev) quando aplic√°vel</li>
            <li>Valores inv√°lidos tratados: page=0 ou negativo ‚Üí 400, limit muito alto ‚Üí limitado ao m√°ximo</li>
            <li>Comportamento consistente: √∫ltima p√°gina vazia retorna array vazio, n√£o erro</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Ordena√ß√£o</h3>
          <p>Valide capacidade de ordenar resultados por um ou m√∫ltiplos campos, dire√ß√£o (ascendente/descendente) e tratamento de campos inv√°lidos.</p>
          <p><strong>Cen√°rios de teste:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Ordena√ß√£o simples: <code>?sort=name&order=asc</code> ‚Üí Resultados ordenados</li>
            <li>M√∫ltiplos campos: <code>?sort=name,age&order=asc,desc</code> ‚Üí Ordena√ß√£o composta</li>
            <li>Campo inexistente: <code>?sort=invalidField</code> ‚Üí 400 Bad Request</li>
            <li>Dire√ß√£o inv√°lida: <code>?order=invalid</code> ‚Üí 400 ou default para asc</li>
            <li>Campos n√£o orden√°veis: <code>?sort=password</code> ‚Üí 400 (seguran√ßa)</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Filtros e Query Parameters</h3>
          <p>Valide capacidade de filtrar resultados usando query parameters, operadores suportados, combina√ß√µes e prote√ß√£o contra injection.</p>
          <p><strong>Valida√ß√µes obrigat√≥rias:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Filtro simples: <code>?status=active</code> ‚Üí Apenas recursos com status active</li>
            <li>M√∫ltiplos filtros: <code>?status=active&category=tech</code> ‚Üí AND l√≥gico</li>
            <li>Operadores: <code>?age=gt:18</code>, <code>?price=lt:100</code> ‚Üí Maior que, menor que</li>
            <li>SQL injection: <code>?filter=1' OR '1'='1</code> ‚Üí Rejeitado ou sanitizado</li>
            <li>NoSQL injection: <code>?filter[$where]=...</code> ‚Üí Rejeitado</li>
            <li>Campos n√£o filtr√°veis: <code>?password=test</code> ‚Üí Ignorado ou 400 (seguran√ßa)</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Rate Limiting</h3>
          <p>Controle de taxa previne abuso e garante disponibilidade. Valide headers informativos, comportamento quando limite √© excedido e estrat√©gia de retry.</p>
          <p><strong>Valida√ß√µes obrigat√≥rias:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>Headers informativos: X-RateLimit-Limit (limite total), X-RateLimit-Remaining (requisi√ß√µes restantes), X-RateLimit-Reset (timestamp de reset)</li>
            <li>Status 429 Too Many Requests quando limite excedido</li>
            <li>Header Retry-After indicando segundos at√© pr√≥ximo reset</li>
            <li>Comportamento ap√≥s limite: bloqueio tempor√°rio, throttling, ou rejei√ß√£o</li>
            <li>Limites diferentes por tipo de endpoint (GET vs POST) ou por usu√°rio/API key</li>
          </ul>
        </div>

        <div class="info-box" style="margin-top: var(--spacing-xl);">
          <h3>Idempot√™ncia</h3>
          <p>M√©todos PUT, DELETE e PATCH devem ser idempotentes: m√∫ltiplas requisi√ß√µes id√™nticas produzem mesmo resultado. Cr√≠tico para retry autom√°tico e resili√™ncia.</p>
          <p><strong>Valida√ß√µes obrigat√≥rias:</strong></p>
          <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-sm);">
            <li>PUT idempotente: duas requisi√ß√µes id√™nticas resultam em mesmo estado do recurso</li>
            <li>DELETE idempotente: deletar recurso j√° deletado retorna 204, n√£o 404</li>
            <li>PATCH idempotente: aplicar mesmo patch m√∫ltiplas vezes = mesmo resultado</li>
            <li>Idempotency key: header X-Idempotency-Key permite identificar requisi√ß√µes duplicadas</li>
            <li>POST n√£o √© idempotente por padr√£o, mas pode usar idempotency key para garantir</li>
          </ul>
        </div>

        <div style="margin-top: var(--spacing-xl); display: flex; gap: var(--spacing-md); justify-content: space-between; flex-wrap: wrap;">
          <a href="status-codes.html" class="btn btn-secondary">‚Üê Anterior: Status Codes</a>
          <a href="autenticacao.html" class="btn">Pr√≥ximo: Autentica√ß√£o</a>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      QA Playground ‚Äî Projeto educacional ‚Ä¢ Portugu√™s
    </footer>

    <script type="module" src="../../../js/index.js"></script>
  </body>
</html>
