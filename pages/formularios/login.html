<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Login ‚Äî QA Playground</title>
    <link rel="stylesheet" href="../../css/styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="et-header">
      <div class="et-header-inner">
        <a href="../../index.html" class="et-logo" aria-label="In√≠cio">
          <img src="../../assets/icons/logo.svg" alt="Logo QA Playground" height="40" />
        </a>
        <nav class="et-nav" aria-label="Navega√ß√£o principal">
          <ul class="et-nav-list">
            <li><a href="../../index.html">In√≠cio</a></li>
            <li><a href="../fundamentos.html">Fundamentos</a></li>
            <li><a href="login.html" aria-current="page">Login</a></li>
          </ul>
        </nav>
        <div class="et-header-actions">
          <button id="theme-toggle" aria-label="Alternar tema">üåû</button>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="section">
        <div class="section-header">
          <h2>P√°gina de Login</h2>
          <div class="section-desc">Pratique automa√ß√£o e valida√ß√£o de login em uma p√°gina dedicada. Todos os elementos possuem <code>id</code> e <code>data-testid</code> para facilitar testes automatizados.</div>
        </div>

        <div class="subsections">
          <div class="subsection">
            <h3>Formul√°rio de Login</h3>
            <form id="login-form" novalidate>
              <div class="form-grid">
                <div class="form-group">
                  <label for="email">Email</label>
                  <input 
                    id="email" 
                    data-testid="input-email" 
                    type="email" 
                    placeholder="seu@exemplo.com" 
                    required 
                    aria-describedby="email-error email-hint"
                  />
                  <div class="hint" id="email-hint">Digite um email v√°lido para teste</div>
                  <div class="error" id="email-error" aria-live="polite" style="display:none"></div>
                </div>

                <div class="form-group">
                  <label for="password">Senha</label>
                  <input 
                    id="password" 
                    data-testid="input-senha" 
                    type="password" 
                    placeholder="Digite sua senha"
                    maxlength="64" 
                    required 
                    aria-describedby="password-error password-hint"
                  />
                  <div class="hint" id="password-hint">M√≠nimo 6 caracteres</div>
                  <div class="error" id="password-error" aria-live="polite" style="display:none"></div>
                </div>

                <div class="form-group form-full">
                  <label class="radio-group" style="align-items: center; gap: 8px;">
                    <input id="remember" type="checkbox" data-testid="checkbox-remember" />
                    <span>Lembrar-me</span>
                  </label>
                </div>

                <div class="form-group form-full">
                  <button type="submit" id="btn-login" data-testid="btn-login" class="btn">Entrar</button>
                  <p style="margin-top: 12px; text-align: center;">
                    <a href="#recover" id="link-recover" data-testid="link-recover" class="muted">Esqueceu a senha?</a>
                  </p>
                </div>
              </div>
            </form>
          </div>

          <div class="subsection">
            <h3>Informa√ß√µes para Testes</h3>
            <div style="background: var(--surface); padding: var(--spacing-md); border-radius: var(--border-radius-md); border-left: 4px solid var(--accent);">
              <p style="margin-bottom: var(--spacing-sm);"><strong>Credenciais de Teste:</strong></p>
              <ul style="margin-left: var(--spacing-lg); color: var(--muted);">
                <li>Email: <code>teste@qaplayground.com</code></li>
                <li>Senha: <code>senha123</code></li>
              </ul>
              <p style="margin-top: var(--spacing-md); margin-bottom: var(--spacing-sm);"><strong>Elementos identific√°veis:</strong></p>
              <ul style="margin-left: var(--spacing-lg); color: var(--muted); font-size: var(--font-size-sm);">
                <li><code>data-testid="input-email"</code></li>
                <li><code>data-testid="input-senha"</code></li>
                <li><code>data-testid="checkbox-remember"</code></li>
                <li><code>data-testid="btn-login"</code></li>
                <li><code>data-testid="link-recover"</code></li>
              </ul>
            </div>
          </div>
        </div>

        <div style="margin-top: var(--spacing-xl); text-align: center;">
          <a href="../../index.html" class="btn btn-secondary">‚Üê Voltar para In√≠cio</a>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      QA Playground ‚Äî Projeto educacional ‚Ä¢ Portugu√™s
    </footer>

    <script src="../../js/app.js"></script>
    <script>
      function validateEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      const loginForm = document.getElementById('login-form');
      
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Limpa erros anteriores
        window.clearFieldError('email');
        window.clearFieldError('password');
        
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        let isValid = true;
        
        // Valida√ß√£o de email
        if (!email) {
          window.setFieldError('email', 'Email √© obrigat√≥rio.');
          isValid = false;
        } else if (!validateEmail(email)) {
          window.setFieldError('email', 'Formato de email inv√°lido.');
          isValid = false;
        }
        
        // Valida√ß√£o de senha
        if (!password) {
          window.setFieldError('password', 'Senha √© obrigat√≥ria.');
          isValid = false;
        } else if (password.length < 6) {
          window.setFieldError('password', 'Senha deve ter no m√≠nimo 6 caracteres.');
          isValid = false;
        }
        
        if (!isValid) return;
        
        // Simula√ß√£o de login
        document.getElementById('btn-login').disabled = true;
        document.getElementById('btn-login').textContent = 'Autenticando...';
        
        setTimeout(() => {
          window.showToast('Login realizado com sucesso!');
          loginForm.reset();
          document.getElementById('btn-login').disabled = false;
          document.getElementById('btn-login').textContent = 'Entrar';
        }, 1500);
      });

      // Link de recupera√ß√£o de senha
      document.getElementById('link-recover').addEventListener('click', function(e) {
        e.preventDefault();
        window.showToast('Redirecionando para recupera√ß√£o de senha...');
      });

      // Valida√ß√£o em tempo real
      document.getElementById('email').addEventListener('blur', function() {
        const email = this.value.trim();
        if (email && !validateEmail(email)) {
          window.setFieldError('email', 'Formato de email inv√°lido.');
        } else {
          window.clearFieldError('email');
        }
      });

      document.getElementById('password').addEventListener('blur', function() {
        const password = this.value;
        if (password && password.length < 6) {
          window.setFieldError('password', 'Senha deve ter no m√≠nimo 6 caracteres.');
        } else {
          window.clearFieldError('password');
        }
      });
    </script>
  </body>
</html>
