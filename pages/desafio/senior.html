<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Desafios S√™nior ‚Äî QA Playground</title>
    <link rel="stylesheet" href="../../css/styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="et-header">
      <div class="et-header-inner">
        <a href="../../index.html" class="et-logo" aria-label="In√≠cio">
          <img src="../../assets/icons/logo.svg" alt="Logo QA Playground" height="40" />
        </a>
        <nav class="et-nav" aria-label="Navega√ß√£o principal">
          <ul class="et-nav-list">
            <li><a href="../../index.html">In√≠cio</a></li>
            <li><a href="../fundamentos.html">Fundamentos</a></li>
            <li><a href="../junior/formularios/">Formul√°rios</a></li>
            <li><a href="../junior/tabelas/">Tabelas</a></li>
            <li><a href="../junior/interacoes/">Intera√ß√µes</a></li>
            <li class="nav-dropdown">
              <button class="dropdown-toggle" aria-expanded="false" aria-haspopup="true">Desafio</button>
              <ul class="dropdown-menu">
                <li><a href="junior.html">Desafios J√∫nior</a></li>
                <li><a href="pleno.html">Desafios Pleno</a></li>
                <li><a href="senior.html">Desafios S√™nior</a></li>
              </ul>
            </li>
          </ul>
        </nav>
        <div class="et-header-actions">
          <button id="theme-toggle" aria-label="Alternar tema">üåû</button>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="hero">
        <h1>Desafios N√≠vel S√™nior</h1>
        <p>
          Desafios avan√ßados que exigem conhecimento profundo de automa√ß√£o, arquitetura de testes, manipula√ß√£o de DOM complexo, integra√ß√£o com APIs e cen√°rios realistas de produ√ß√£o. Estes desafios testam habilidades de QA S√™nior sem facilitar a complexidade.
        </p>
      </section>

      <section class="section">
        <div class="section-header">
          <h2>Desafios N√≠vel S√™nior</h2>
          <div class="section-desc">Desafios avan√ßados envolvendo DOM complexo, Shadow DOM, APIs, autentica√ß√£o, iframes, m√∫ltiplas janelas e cen√°rios realistas de produ√ß√£o. Requer conhecimento avan√ßado de automa√ß√£o, estrat√©gias de localiza√ß√£o complexas e gerenciamento de estados ass√≠ncronos.</div>
        </div>

        <div class="subsections-vertical">
          <!-- Desafio 1: Shadow DOM -->
          <div class="subsection challenge-section">
            <h3>Desafio 1: Intera√ß√£o com Shadow DOM</h3>
            <p><strong>Objetivo:</strong> Localizar e interagir com elementos dentro de Shadow DOM encapsulado, que n√£o s√£o acess√≠veis por seletores CSS tradicionais. Este √© um dos desafios mais complexos de automa√ß√£o web moderna.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>Encapsulamento:</strong> Elementos dentro de Shadow DOM n√£o s√£o acess√≠veis por seletores CSS/XPath tradicionais</li>
                <li><strong>Shadow Root:</strong> Deve ser acessado via <code>element.shadowRoot</code> (apenas se mode='open')</li>
                <li><strong>Shadow DOM Fechado:</strong> Se mode='closed', acesso √© ainda mais limitado e requer estrat√©gias alternativas</li>
                <li><strong>Nested Shadow DOM:</strong> Pode haver Shadow DOMs aninhados (Shadow DOM dentro de Shadow DOM)</li>
                <li><strong>Intera√ß√£o:</strong> Ap√≥s localizar elemento dentro do Shadow Root, intera√ß√µes funcionam normalmente</li>
                <li><strong>Desafio Extra:</strong> Criar fun√ß√£o helper reutiliz√°vel que funcione com qualquer n√≠vel de aninhamento</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Falha com Seletores Tradicionais</h5>
              <p><strong>O que fazer:</strong> Tentar localizar elemento dentro do Shadow DOM usando seletores CSS tradicionais</p>
              <p><strong>Resultado Esperado:</strong> Seletores tradicionais falham (elemento n√£o encontrado)</p>
              <p><strong>Valida√ß√£o:</strong> Confirme que <code>driver.find_element(By.CSS_SELECTOR, "button")</code> n√£o encontra o bot√£o dentro do Shadow DOM</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Acesso via Shadow Root (Open Mode)</h5>
              <p><strong>O que fazer:</strong> Acessar Shadow Root e localizar elemento dentro dele</p>
              <p><strong>Resultado Esperado:</strong> Elemento √© encontrado e pode ser interagido</p>
              <p><strong>Desafio:</strong> Criar fun√ß√£o que verifica se Shadow Root est√° aberto antes de acessar</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Intera√ß√£o com Elementos Encapsulados</h5>
              <p><strong>O que fazer:</strong> Clicar em bot√£o e preencher input dentro do Shadow DOM</p>
              <p><strong>Resultado Esperado:</strong> Intera√ß√µes funcionam normalmente ap√≥s acesso correto ao Shadow Root</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: Shadow DOMs Aninhados</h5>
              <p><strong>O que fazer:</strong> Acessar elemento dentro de Shadow DOM que est√° dentro de outro Shadow DOM</p>
              <p><strong>Resultado Esperado:</strong> Deve acessar cada n√≠vel sequencialmente: shadowRoot1 ‚Üí shadowRoot2 ‚Üí elemento</p>
              <p><strong>Desafio Avan√ßado:</strong> Criar fun√ß√£o recursiva que encontre elemento em qualquer n√≠vel de aninhamento</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 5: Valida√ß√£o de Estados</h5>
              <p><strong>O que fazer:</strong> Validar estado (checked, value, text) de elementos dentro do Shadow DOM</p>
              <p><strong>Resultado Esperado:</strong> Estados podem ser lidos normalmente ap√≥s acesso correto</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>Host Element:</strong> <code>data-testid="shadow-host"</code> ou elemento custom que cont√©m Shadow DOM</li>
                <li><strong>Acesso Shadow Root:</strong> <code>element.shadowRoot</code> (JavaScript) ou via <code>executeScript</code></li>
                <li><strong>Elemento dentro Shadow:</strong> <code>shadowRoot.querySelector('button')</code></li>
                <li><strong>Verificar Mode:</strong> <code>element.shadowRoot.mode</code> retorna 'open' ou 'closed'</li>
                <li><strong>M√∫ltiplos Elementos:</strong> <code>shadowRoot.querySelectorAll('input')</code></li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/shadow-dom.html" target="_blank">Shadow DOM</a></li>
                <li>Use DevTools para inspecionar e identificar o elemento host que cont√©m Shadow DOM</li>
                <li>Tente localizar bot√£o usando <code>driver.find_element(By.CSS_SELECTOR, "button")</code> ‚Üí Deve falhar</li>
                <li>Acesse o Shadow Root: <code>shadowHost = driver.find_element(By.ID, "shadow-host")</code></li>
                <li>Use JavaScript executor para acessar: <code>shadowRoot = driver.execute_script("return arguments[0].shadowRoot", shadowHost)</code></li>
                <li>Localize elemento dentro: <code>button = driver.execute_script("return arguments[0].querySelector('button')", shadowRoot)</code></li>
                <li>Interaja com o elemento: <code>driver.execute_script("arguments[0].click()", button)</code></li>
                <li>Valide que a intera√ß√£o funcionou verificando mudan√ßas no resultado</li>
                <li>Se houver Shadow DOMs aninhados, repita o processo para cada n√≠vel</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-1">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-1" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-1-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-1-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-1-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-1-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-1-robot">Robot Framework</button>
                </div>
                <div id="code-senior-1-cypress" class="code-content active">
                  <pre><code>it('deve interagir com Shadow DOM', () => {
  cy.visit('/pages/senior/dinamicos/shadow-dom.html')
  
  // Acessa Shadow Root e encontra elemento
  cy.get('[data-testid="shadow-host"]').then($host => {
    return $host[0].shadowRoot.querySelector('button')
  }).then($button => {
    cy.wrap($button).click()
  })
  
  // Valida resultado
  cy.get('[data-testid="shadow-result"]')
    .should('contain', 'clicado')
})

// Helper function para Shadow DOM aninhado
function findInShadow(selector, shadowHost) {
  const shadowRoot = shadowHost.shadowRoot
  if (!shadowRoot) return null
  
  let element = shadowRoot.querySelector(selector)
  if (element) return element
  
  // Busca recursivamente em Shadow DOMs aninhados
  const nestedShadows = shadowRoot.querySelectorAll('*')
  for (let el of nestedShadows) {
    if (el.shadowRoot) {
      element = findInShadow(selector, el)
      if (element) return element
    }
  }
  return null
}</code></pre>
                </div>
                <div id="code-senior-1-playwright" class="code-content">
                  <pre><code>test('deve interagir com Shadow DOM', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/shadow-dom.html')
  
  // Playwright tem suporte nativo para Shadow DOM
  const shadowHost = page.locator('[data-testid="shadow-host"]')
  const button = shadowHost.locator('button')
  await button.click()
  
  await expect(page.getByTestId('shadow-result')).toContainText('clicado')
})

// Para Shadow DOM fechado ou aninhado
test('Shadow DOM aninhado', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/shadow-dom.html')
  
  // Acessa via JavaScript
  const button = await page.evaluateHandle(() => {
    const host = document.querySelector('[data-testid="shadow-host"]')
    return host.shadowRoot.querySelector('custom-element')
      .shadowRoot.querySelector('button')
  })
  await button.click()
})</code></pre>
                </div>
                <div id="code-senior-1-selenium" class="code-content">
                  <pre><code>@Test
public void testShadowDOM() {
    driver.get("http://localhost/pages/senior/dinamicos/shadow-dom.html");
    
    // Localiza host element
    WebElement shadowHost = driver.findElement(By.cssSelector("[data-testid='shadow-host']"));
    
    // Acessa Shadow Root via JavaScript
    JavascriptExecutor js = (JavascriptExecutor) driver;
    WebElement shadowRoot = (WebElement) js.executeScript(
        "return arguments[0].shadowRoot", shadowHost);
    
    // Localiza elemento dentro do Shadow Root
    WebElement button = (WebElement) js.executeScript(
        "return arguments[0].querySelector('button')", shadowRoot);
    
    // Interage com o elemento
    js.executeScript("arguments[0].click()", button);
    
    // Valida resultado
    WebElement result = driver.findElement(By.cssSelector("[data-testid='shadow-result']"));
    assertTrue(result.getText().contains("clicado"));
}

// Helper method para Shadow DOM aninhado
public WebElement findInShadowDOM(String selector, WebElement host) {
    JavascriptExecutor js = (JavascriptExecutor) driver;
    Object shadowRoot = js.executeScript("return arguments[0].shadowRoot", host);
    if (shadowRoot == null) return null;
    
    WebElement element = (WebElement) js.executeScript(
        "return arguments[0].querySelector(arguments[1])", shadowRoot, selector);
    if (element != null) return element;
    
    // Busca recursivamente em Shadow DOMs aninhados
    List<WebElement> nested = (List<WebElement>) js.executeScript(
        "return Array.from(arguments[0].querySelectorAll('*'))", shadowRoot);
    for (WebElement el : nested) {
        if (js.executeScript("return arguments[0].shadowRoot", el) != null) {
            element = findInShadowDOM(selector, el);
            if (element != null) return element;
        }
    }
    return null;
}</code></pre>
                </div>
                <div id="code-senior-1-capybara" class="code-content">
                  <pre><code>scenario 'deve interagir com Shadow DOM' do
  visit '/pages/senior/dinamicos/shadow-dom.html'
  
  # Acessa Shadow Root via JavaScript
  shadow_host = find('[data-testid="shadow-host"]', visible: false)
  shadow_root = page.execute_script("return arguments[0].shadowRoot", shadow_host)
  button = page.execute_script("return arguments[0].querySelector('button')", shadow_root)
  page.execute_script("arguments[0].click()", button)
  
  expect(page).to have_content('clicado')
end

# Helper para Shadow DOM aninhado
def find_in_shadow(selector, host)
  shadow_root = page.execute_script("return arguments[0].shadowRoot", host)
  return nil unless shadow_root
  
  element = page.execute_script("return arguments[0].querySelector(arguments[1])", 
    shadow_root, selector)
  return element if element
  
  # Busca recursiva
  nested = page.execute_script("return Array.from(arguments[0].querySelectorAll('*'))", 
    shadow_root)
  nested.each do |el|
    if page.execute_script("return arguments[0].shadowRoot", el)
      found = find_in_shadow(selector, el)
      return found if found
    end
  end
  nil
end</code></pre>
                </div>
                <div id="code-senior-1-robot" class="code-content">
                  <pre><code>*** Test Cases ***
Interagir Com Shadow DOM
    Go To    http://localhost/pages/senior/dinamicos/shadow-dom.html
    ${host}=    Get WebElement    css:[data-testid="shadow-host"]
    ${shadowRoot}=    Execute Javascript    return arguments[0].shadowRoot;    ARGUMENTS    ${host}
    ${button}=    Execute Javascript    return arguments[0].querySelector('button');    ARGUMENTS    ${shadowRoot}
    Execute Javascript    arguments[0].click();    ARGUMENTS    ${button}
    Element Should Contain    css:[data-testid="shadow-result"]    clicado</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 2: Large DOM -->
          <div class="subsection challenge-section">
            <h3>Desafio 2: Performance em Large DOM</h3>
            <p><strong>Objetivo:</strong> Testar performance e localiza√ß√£o de elementos em uma p√°gina com milhares de elementos DOM. Otimizar seletores e estrat√©gias para garantir testes r√°pidos e confi√°veis mesmo em DOMs massivos.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>Tamanho do DOM:</strong> P√°gina cont√©m 10.000+ elementos DOM</li>
                <li><strong>Performance:</strong> Localiza√ß√£o de elemento deve ocorrer em menos de 1 segundo</li>
                <li><strong>Elementos Fora da Viewport:</strong> Muitos elementos n√£o est√£o vis√≠veis inicialmente</li>
                <li><strong>Scroll Necess√°rio:</strong> Elementos podem estar em qualquer posi√ß√£o da p√°gina</li>
                <li><strong>Seletores:</strong> Seletores gen√©ricos (div, span) retornam milhares de elementos e s√£o lentos</li>
                <li><strong>Otimiza√ß√£o:</strong> data-testid √© significativamente mais r√°pido que CSS/XPath gen√©ricos</li>
                <li><strong>Desafio Extra:</strong> Criar benchmark comparando performance de diferentes estrat√©gias de localiza√ß√£o</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Medi√ß√£o de Performance</h5>
              <p><strong>O que fazer:</strong> Medir tempo de localiza√ß√£o usando diferentes seletores</p>
              <p><strong>Resultado Esperado:</strong> data-testid deve ser mais r√°pido que CSS gen√©rico, que √© mais r√°pido que XPath complexo</p>
              <p><strong>Desafio:</strong> Criar teste que compare: <code>div[data-testid="item-5000"]</code> vs <code>div:nth-child(5000)</code> vs <code>//div[5000]</code></p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Localiza√ß√£o de Elemento Espec√≠fico</h5>
              <p><strong>O que fazer:</strong> Localizar elemento espec√≠fico (ex: item-5000) entre 10k+ elementos</p>
              <p><strong>Resultado Esperado:</strong> Elemento √© encontrado em menos de 1 segundo usando seletor otimizado</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Elemento Fora da Viewport</h5>
              <p><strong>O que fazer:</strong> Localizar elemento que n√£o est√° vis√≠vel inicialmente (requer scroll)</p>
              <p><strong>Resultado Esperado:</strong> Elemento √© encontrado, scroll √© executado, elemento fica vis√≠vel</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: M√∫ltiplas Localiza√ß√µes</h5>
              <p><strong>O que fazer:</strong> Localizar 10 elementos diferentes espalhados pelo DOM</p>
              <p><strong>Resultado Esperado:</strong> Todas as localiza√ß√µes completam em tempo aceit√°vel</p>
              <p><strong>Desafio:</strong> Otimizar para que todas as 10 localiza√ß√µes completem em menos de 5 segundos total</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>data-testid (Recomendado):</strong> <code>div[data-testid="item-5000"]</code> - Mais r√°pido</li>
                <li><strong>CSS Espec√≠fico:</strong> <code>div.item-class[data-id="5000"]</code> - R√°pido se espec√≠fico</li>
                <li><strong>XPath:</strong> <code>//div[@data-testid='item-5000']</code> - Mais lento, evite se poss√≠vel</li>
                <li><strong>Evitar:</strong> <code>div</code>, <code>span</code>, <code>//div</code> - Retornam milhares de elementos</li>
                <li><strong>Scroll:</strong> <code>element.scrollIntoView()</code> ou <code>driver.execute_script("arguments[0].scrollIntoView()", element)</code></li>
                <li><strong>Filtrar Visibilidade:</strong> Use <code>is_displayed()</code> ap√≥s <code>find_elements()</code> se necess√°rio</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/large-dom.html" target="_blank">Large DOM</a></li>
                <li>Use DevTools Performance tab para medir tempo de carregamento da p√°gina</li>
                <li>Me√ßa tempo de localiza√ß√£o com seletor gen√©rico: <code>driver.find_elements(By.TAG_NAME, "div")</code> ‚Üí Anote tempo</li>
                <li>Me√ßa tempo com data-testid: <code>driver.find_element(By.CSS_SELECTOR, "[data-testid='item-5000']")</code> ‚Üí Compare</li>
                <li>Localize elemento espec√≠fico usando data-testid ‚Üí Deve ser r√°pido</li>
                <li>Se elemento n√£o estiver vis√≠vel, use <code>scrollIntoView()</code> antes de interagir</li>
                <li>Teste localizar m√∫ltiplos elementos espalhados pelo DOM</li>
                <li>Crie benchmark comparando diferentes estrat√©gias de localiza√ß√£o</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-2">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-2" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-2-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-2-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-2-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-2-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-2-robot">Robot Framework</button>
                </div>
                <div id="code-senior-2-cypress" class="code-content active">
                  <pre><code>it('deve localizar elemento em DOM grande com performance', () => {
  cy.visit('/pages/senior/dinamicos/large-dom.html')
  
  // Mede tempo de localiza√ß√£o
  const start = performance.now()
  cy.get('[data-testid="item-5000"]').should('exist')
  const end = performance.now()
  
  // Valida que foi r√°pido (menos de 1 segundo)
  expect(end - start).to.be.lessThan(1000)
  
  // Scroll at√© elemento se necess√°rio
  cy.get('[data-testid="item-5000"]').scrollIntoView().should('be.visible')
})

// Benchmark de diferentes seletores
it('benchmark de seletores', () => {
  cy.visit('/pages/senior/dinamicos/large-dom.html')
  
  const times = {}
  
  // Testa data-testid
  const start1 = performance.now()
  cy.get('[data-testid="item-5000"]')
  times.testid = performance.now() - start1
  
  // Testa CSS espec√≠fico
  const start2 = performance.now()
  cy.get('div.item[data-id="5000"]')
  times.css = performance.now() - start2
  
  cy.log('Performance:', times)
})</code></pre>
                </div>
                <div id="code-senior-2-playwright" class="code-content">
                  <pre><code>test('deve localizar elemento em DOM grande', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/large-dom.html')
  
  // Mede tempo de localiza√ß√£o
  const start = Date.now()
  await page.getByTestId('item-5000').waitFor({ state: 'attached' })
  const duration = Date.now() - start
  
  // Valida performance
  expect(duration).toBeLessThan(1000)
  
  // Scroll se necess√°rio
  await page.getByTestId('item-5000').scrollIntoViewIfNeeded()
  await expect(page.getByTestId('item-5000')).toBeVisible()
})

// Benchmark
test('benchmark seletores', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/large-dom.html')
  
  const start1 = Date.now()
  await page.locator('[data-testid="item-5000"]').waitFor()
  const time1 = Date.now() - start1
  
  const start2 = Date.now()
  await page.locator('div.item').nth(4999).waitFor()
  const time2 = Date.now() - start2
  
  console.log(`data-testid: ${time1}ms, CSS nth: ${time2}ms`)
})</code></pre>
                </div>
                <div id="code-senior-2-selenium" class="code-content">
                  <pre><code>@Test
public void testLargeDOMPerformance() {
    driver.get("http://localhost/pages/senior/dinamicos/large-dom.html");
    
    // Mede tempo de localiza√ß√£o
    long start = System.currentTimeMillis();
    WebElement element = driver.findElement(By.cssSelector("[data-testid='item-5000']"));
    long duration = System.currentTimeMillis() - start;
    
    // Valida performance (menos de 1 segundo)
    assertTrue(duration < 1000, "Localiza√ß√£o deve ser r√°pida: " + duration + "ms");
    
    // Scroll se necess√°rio
    ((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", element);
    
    // Valida visibilidade
    assertTrue(element.isDisplayed());
}

// Benchmark de seletores
@Test
public void benchmarkSelectors() {
    driver.get("http://localhost/pages/senior/dinamicos/large-dom.html");
    
    // Testa data-testid
    long start1 = System.currentTimeMillis();
    driver.findElement(By.cssSelector("[data-testid='item-5000']"));
    long time1 = System.currentTimeMillis() - start1;
    
    // Testa XPath
    long start2 = System.currentTimeMillis();
    driver.findElement(By.xpath("//div[@data-testid='item-5000']"));
    long time2 = System.currentTimeMillis() - start2;
    
    System.out.println("data-testid: " + time1 + "ms, XPath: " + time2 + "ms");
}</code></pre>
                </div>
                <div id="code-senior-2-capybara" class="code-content">
                  <pre><code>scenario 'deve localizar elemento em DOM grande' do
  visit '/pages/senior/dinamicos/large-dom.html'
  
  # Mede tempo
  start = Time.now
  element = find('[data-testid="item-5000"]')
  duration = ((Time.now - start) * 1000).to_i
  
  expect(duration).to be < 1000
  
  # Scroll se necess√°rio
  execute_script("arguments[0].scrollIntoView(true);", element)
  expect(element).to be_visible
end</code></pre>
                </div>
                <div id="code-senior-2-robot" class="code-content">
                  <pre><code>*** Test Cases ***
Localizar Em DOM Grande
    Go To    http://localhost/pages/senior/dinamicos/large-dom.html
    ${start}=    Evaluate    time.time()    modules=time
    Wait Until Element Is Visible    css:[data-testid="item-5000"]    timeout=2s
    ${duration}=    Evaluate    (time.time() - ${start}) * 1000    modules=time
    Should Be True    ${duration} < 1000
    Scroll Element Into View    css:[data-testid="item-5000"]</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 3: Dynamic Content Loading -->
          <div class="subsection challenge-section">
            <h3>Desafio 3: Conte√∫do Din√¢mico com Loading Ass√≠ncrono</h3>
            <p><strong>Objetivo:</strong> Testar elementos carregados dinamicamente via AJAX/fetch com delays vari√°veis e imprevis√≠veis. Criar estrat√©gias robustas de wait que funcionem com qualquer tempo de resposta.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>Delay Vari√°vel:</strong> Tempo de carregamento pode variar de 1 a 10 segundos (aleat√≥rio)</li>
                <li><strong>Loading State:</strong> Spinner/loader aparece durante carregamento e desaparece quando completo</li>
                <li><strong>M√∫ltiplos Carregamentos:</strong> Sistema pode ter m√∫ltiplos carregamentos simult√¢neos</li>
                <li><strong>Timeout:</strong> Se carregamento exceder 15 segundos, deve mostrar erro</li>
                <li><strong>Estado Inicial:</strong> Conte√∫do n√£o existe no DOM antes do carregamento</li>
                <li><strong>Desafio Extra:</strong> Criar wait customizado que funcione com delays vari√°veis sem usar time.sleep fixo</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Carregamento com Delay Curto</h5>
              <p><strong>O que fazer:</strong> Disparar carregamento e aguardar conte√∫do aparecer (delay de 1-3 segundos)</p>
              <p><strong>Resultado Esperado:</strong> Spinner aparece, conte√∫do carrega, spinner desaparece</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Carregamento com Delay Longo</h5>
              <p><strong>O que fazer:</strong> Disparar carregamento e aguardar conte√∫do aparecer (delay de 5-10 segundos)</p>
              <p><strong>Resultado Esperado:</strong> Wait expl√≠cito aguarda corretamente, conte√∫do aparece</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: M√∫ltiplos Carregamentos Sequenciais</h5>
              <p><strong>O que fazer:</strong> Disparar 3 carregamentos sequenciais, aguardando cada um completar</p>
              <p><strong>Resultado Esperado:</strong> Cada carregamento completa antes do pr√≥ximo iniciar</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: Valida√ß√£o Durante Loading</h5>
              <p><strong>O que fazer:</strong> Durante o carregamento, verificar que spinner est√° vis√≠vel e conte√∫do n√£o existe</p>
              <p><strong>Resultado Esperado:</strong> Spinner vis√≠vel, conte√∫do ausente do DOM</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 5: Timeout (Negativo)</h5>
              <p><strong>O que fazer:</strong> Simular timeout (se poss√≠vel) ou aguardar tempo m√°ximo</p>
              <p><strong>Resultado Esperado:</strong> Mensagem de erro aparece ap√≥s timeout</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>Spinner:</strong> <code>data-testid="loading-spinner"</code> ou elemento com classe "loading"</li>
                <li><strong>Conte√∫do Din√¢mico:</strong> <code>data-testid="dynamic-content"</code> ou container que recebe conte√∫do</li>
                <li><strong>Bot√£o Trigger:</strong> <code>data-testid="btn-load"</code> ou bot√£o que dispara carregamento</li>
                <li><strong>Mensagem Erro:</strong> <code>data-testid="error-message"</code> para timeouts</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/dynamic-content.html" target="_blank">Conte√∫do Din√¢mico</a></li>
                <li>Verifique que o conte√∫do din√¢mico n√£o existe inicialmente no DOM</li>
                <li>Clique no bot√£o que dispara carregamento</li>
                <li>Verifique que spinner aparece imediatamente</li>
                <li>Use wait expl√≠cito para aguardar conte√∫do aparecer (n√£o use time.sleep fixo)</li>
                <li>Valide que spinner desaparece quando conte√∫do √© carregado</li>
                <li>Valide que conte√∫do foi carregado corretamente</li>
                <li>Teste m√∫ltiplos carregamentos sequenciais</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-3">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-3" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-3-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-3-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-3-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-3-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-3-robot">Robot Framework</button>
                </div>
                <div id="code-senior-3-cypress" class="code-content active">
                  <pre><code>it('deve aguardar conte√∫do din√¢mico carregar', () => {
  cy.visit('/pages/senior/dinamicos/dynamic-content.html')
  
  // Verifica que conte√∫do n√£o existe inicialmente
  cy.get('[data-testid="dynamic-content"]').should('not.exist')
  
  // Dispara carregamento
  cy.get('[data-testid="btn-load"]').click()
  
  // Aguarda spinner aparecer
  cy.get('[data-testid="loading-spinner"]', { timeout: 1000 }).should('be.visible')
  
  // Aguarda conte√∫do aparecer (wait expl√≠cito)
  cy.get('[data-testid="dynamic-content"]', { timeout: 15000 })
    .should('be.visible')
    .and('contain', 'Carregado')
  
  // Verifica que spinner desapareceu
  cy.get('[data-testid="loading-spinner"]').should('not.exist')
})</code></pre>
                </div>
                <div id="code-senior-3-playwright" class="code-content">
                  <pre><code>test('deve aguardar conte√∫do din√¢mico', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/dynamic-content.html')
  
  // Verifica que n√£o existe
  await expect(page.getByTestId('dynamic-content')).not.toBeAttached()
  
  // Dispara carregamento
  await page.getByTestId('btn-load').click()
  
  // Aguarda spinner
  await expect(page.getByTestId('loading-spinner')).toBeVisible({ timeout: 1000 })
  
  // Aguarda conte√∫do (wait expl√≠cito)
  await expect(page.getByTestId('dynamic-content')).toBeVisible({ timeout: 15000 })
  
  // Verifica spinner desapareceu
  await expect(page.getByTestId('loading-spinner')).not.toBeVisible()
})</code></pre>
                </div>
                <div id="code-senior-3-selenium" class="code-content">
                  <pre><code>@Test
public void testDynamicContent() {
    driver.get("http://localhost/pages/senior/dinamicos/dynamic-content.html");
    
    // Verifica que n√£o existe
    List<WebElement> content = driver.findElements(By.cssSelector("[data-testid='dynamic-content']"));
    assertEquals(0, content.size());
    
    // Dispara carregamento
    driver.findElement(By.cssSelector("[data-testid='btn-load']")).click();
    
    // Aguarda spinner aparecer
    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(15));
    wait.until(ExpectedConditions.visibilityOfElementLocated(
        By.cssSelector("[data-testid='loading-spinner']")));
    
    // Aguarda conte√∫do aparecer (wait expl√≠cito)
    wait.until(ExpectedConditions.presenceOfElementLocated(
        By.cssSelector("[data-testid='dynamic-content']")));
    
    // Verifica spinner desapareceu
    wait.until(ExpectedConditions.invisibilityOfElementLocated(
        By.cssSelector("[data-testid='loading-spinner']")));
}</code></pre>
                </div>
                <div id="code-senior-3-capybara" class="code-content">
                  <pre><code>scenario 'deve aguardar conte√∫do din√¢mico' do
  visit '/pages/senior/dinamicos/dynamic-content.html'
  
  # Verifica que n√£o existe
  expect(page).not_to have_selector('[data-testid="dynamic-content"]')
  
  # Dispara carregamento
  click_button 'Carregar'
  
  # Aguarda spinner
  expect(page).to have_selector('[data-testid="loading-spinner"]', visible: true, wait: 1)
  
  # Aguarda conte√∫do (wait expl√≠cito)
  expect(page).to have_selector('[data-testid="dynamic-content"]', visible: true, wait: 15)
  
  # Verifica spinner desapareceu
  expect(page).not_to have_selector('[data-testid="loading-spinner"]', visible: true)
end</code></pre>
                </div>
                <div id="code-senior-3-robot" class="code-content">
                  <pre><code>*** Test Cases ***
Aguardar Conteudo Dinamico
    Go To    http://localhost/pages/senior/dinamicos/dynamic-content.html
    Element Should Not Exist    css:[data-testid="dynamic-content"]
    Click Element    css:[data-testid="btn-load"]
    Wait Until Element Is Visible    css:[data-testid="loading-spinner"]    timeout=1s
    Wait Until Element Is Visible    css:[data-testid="dynamic-content"]    timeout=15s
    Wait Until Element Is Not Visible    css:[data-testid="loading-spinner"]    timeout=2s</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 4: Iframe -->
          <div class="subsection challenge-section">
            <h3>Desafio 4: Intera√ß√£o com Iframe e Iframes Aninhados</h3>
            <p><strong>Objetivo:</strong> Localizar e interagir com elementos dentro de iframes, incluindo iframes aninhados. Gerenciar mudan√ßas de contexto corretamente para evitar erros de localiza√ß√£o.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>Isolamento:</strong> Elementos dentro do iframe n√£o s√£o acess√≠veis do contexto principal</li>
                <li><strong>Mudan√ßa de Contexto:</strong> Deve mudar para o iframe antes de localizar elementos dentro dele</li>
                <li><strong>Retorno:</strong> Deve voltar ao contexto principal ap√≥s intera√ß√µes no iframe</li>
                <li><strong>Iframes Aninhados:</strong> Pode haver iframe dentro de iframe, requerendo m√∫ltiplas mudan√ßas de contexto</li>
                <li><strong>Armadilha:</strong> Esquecer de voltar ao contexto principal causa falhas em testes subsequentes</li>
                <li><strong>Desafio Extra:</strong> Criar context manager (Python) ou try-finally que garanta retorno ao contexto principal</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Falha sem Mudan√ßa de Contexto</h5>
              <p><strong>O que fazer:</strong> Tentar localizar elemento dentro do iframe sem mudar contexto</p>
              <p><strong>Resultado Esperado:</strong> Elemento n√£o √© encontrado (NoSuchElementException)</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Intera√ß√£o com Iframe Simples</h5>
              <p><strong>O que fazer:</strong> Mudar contexto, localizar e interagir com elemento, voltar ao contexto principal</p>
              <p><strong>Resultado Esperado:</strong> Intera√ß√£o funciona corretamente, contexto principal √© restaurado</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Iframes Aninhados</h5>
              <p><strong>O que fazer:</strong> Acessar elemento dentro de iframe que est√° dentro de outro iframe</p>
              <p><strong>Resultado Esperado:</strong> Deve mudar contexto sequencialmente: principal ‚Üí iframe1 ‚Üí iframe2</p>
              <p><strong>Desafio:</strong> Criar fun√ß√£o que encontre e acesse iframe aninhado automaticamente</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: M√∫ltiplos Iframes na P√°gina</h5>
              <p><strong>O que fazer:</strong> Interagir com elementos em diferentes iframes na mesma p√°gina</p>
              <p><strong>Resultado Esperado:</strong> Deve mudar contexto para cada iframe antes de interagir</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>Iframe:</strong> <code>iframe</code> ou <code>data-testid="iframe-container"</code></li>
                <li><strong>Mudar Contexto:</strong> <code>driver.switch_to.frame(iframe_element)</code> ou <code>driver.switch_to.frame("iframe-id")</code></li>
                <li><strong>Voltar Principal:</strong> <code>driver.switch_to.default_content()</code></li>
                <li><strong>Voltar Um N√≠vel:</strong> <code>driver.switch_to.parent_frame()</code> (para iframes aninhados)</li>
                <li><strong>Elemento Dentro Iframe:</strong> Ap√≥s mudar contexto, localize normalmente</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/iframe.html" target="_blank">Iframe</a></li>
                <li>Identifique o iframe na p√°gina (use DevTools)</li>
                <li>Tente localizar elemento dentro do iframe sem mudar contexto ‚Üí Deve falhar</li>
                <li>Localize o iframe: <code>iframe = driver.find_element(By.TAG_NAME, "iframe")</code></li>
                <li>Mude contexto: <code>driver.switch_to.frame(iframe)</code></li>
                <li>Localize elemento dentro do iframe ‚Üí Deve funcionar</li>
                <li>Interaja com o elemento (click, send_keys, etc.)</li>
                <li>Volte ao contexto principal: <code>driver.switch_to.default_content()</code></li>
                <li>Se houver iframes aninhados, repita o processo para cada n√≠vel</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-4">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-4" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-4-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-4-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-4-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-4-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-4-robot">Robot Framework</button>
                </div>
                <div id="code-senior-4-cypress" class="code-content active">
                  <pre><code>it('deve interagir com iframe', () => {
  cy.visit('/pages/senior/dinamicos/iframe.html')
  
  // Cypress precisa carregar iframe explicitamente
  cy.get('iframe').then($iframe => {
    const $body = $iframe.contents().find('body')
    
    // Interage dentro do iframe
    cy.wrap($body).find('button').click()
    cy.wrap($body).find('input').type('Texto no iframe')
  })
})

// Para iframes aninhados
it('iframe aninhado', () => {
  cy.visit('/pages/senior/dinamicos/iframe.html')
  
  cy.get('iframe').then($iframe1 => {
    const $body1 = $iframe1.contents().find('body')
    cy.wrap($body1).find('iframe').then($iframe2 => {
      const $body2 = $iframe2.contents().find('body')
      cy.wrap($body2).find('button').click()
    })
  })
})</code></pre>
                </div>
                <div id="code-senior-4-playwright" class="code-content">
                  <pre><code>test('deve interagir com iframe', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/iframe.html')
  
  // Playwright tem suporte nativo para iframes
  const frame = page.frameLocator('iframe')
  await frame.locator('button').click()
  await frame.locator('input').fill('Texto no iframe')
})

// Iframes aninhados
test('iframe aninhado', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/iframe.html')
  
  const frame1 = page.frameLocator('iframe')
  const frame2 = frame1.frameLocator('iframe')
  await frame2.locator('button').click()
})</code></pre>
                </div>
                <div id="code-senior-4-selenium" class="code-content">
                  <pre><code>@Test
public void testIframe() {
    driver.get("http://localhost/pages/senior/dinamicos/iframe.html");
    
    // Localiza iframe
    WebElement iframe = driver.findElement(By.tagName("iframe"));
    
    // Muda contexto
    driver.switchTo().frame(iframe);
    
    try {
        // Interage dentro do iframe
        WebElement button = driver.findElement(By.tagName("button"));
        button.click();
        
        WebElement input = driver.findElement(By.tagName("input"));
        input.sendKeys("Texto no iframe");
    } finally {
        // SEMPRE volta ao contexto principal
        driver.switchTo().defaultContent();
    }
}

// Helper com context manager (garante retorno)
public void withFrame(WebElement iframe, Runnable action) {
    driver.switchTo().frame(iframe);
    try {
        action.run();
    } finally {
        driver.switchTo().defaultContent();
    }
}

// Uso
@Test
public void testIframeComHelper() {
    driver.get("http://localhost/pages/senior/dinamicos/iframe.html");
    WebElement iframe = driver.findElement(By.tagName("iframe"));
    
    withFrame(iframe, () -> {
        driver.findElement(By.tagName("button")).click();
    });
}</code></pre>
                </div>
                <div id="code-senior-4-capybara" class="code-content">
                  <pre><code>scenario 'deve interagir com iframe' do
  visit '/pages/senior/dinamicos/iframe.html'
  
  # Capybara gerencia iframes automaticamente
  within_frame('iframe') do
    click_button 'Bot√£o'
    fill_in 'input', with: 'Texto no iframe'
  end
end

# Iframes aninhados
scenario 'iframe aninhado' do
  visit '/pages/senior/dinamicos/iframe.html'
  
  within_frame('iframe') do
    within_frame('iframe') do
      click_button 'Bot√£o'
    end
  end
end</code></pre>
                </div>
                <div id="code-senior-4-robot" class="code-content">
                  <pre><code>*** Test Cases ***
Interagir Com Iframe
    Go To    http://localhost/pages/senior/dinamicos/iframe.html
    Select Frame    css:iframe
    Click Element    css:button
    Input Text    css:input    Texto no iframe
    Unselect Frame</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 5: M√∫ltiplas Janelas -->
          <div class="subsection challenge-section">
            <h3>Desafio 5: Gerenciamento de M√∫ltiplas Janelas/Tabs</h3>
            <p><strong>Objetivo:</strong> Testar abertura, gerenciamento e fechamento de m√∫ltiplas janelas/tabs. Criar estrat√©gias robustas para alternar entre janelas e garantir limpeza adequada.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>Window Handles:</strong> Cada janela/tab tem um handle √∫nico que identifica a janela</li>
                <li><strong>Mudan√ßa de Foco:</strong> Deve mudar foco explicitamente para interagir com elementos em outra janela</li>
                <li><strong>Fechamento:</strong> <code>driver.close()</code> fecha apenas a janela atual, n√£o todas</li>
                <li><strong>M√∫ltiplas Janelas:</strong> Sistema pode abrir 3+ janelas simultaneamente</li>
                <li><strong>Armadilha:</strong> Esquecer de voltar para janela original causa falhas em testes subsequentes</li>
                <li><strong>Desafio Extra:</strong> Criar fun√ß√£o que gerencie todas as janelas e garanta limpeza no final (try-finally ou context manager)</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Abertura de Nova Janela</h5>
              <p><strong>O que fazer:</strong> Clicar em bot√£o que abre nova janela e identificar a nova janela</p>
              <p><strong>Resultado Esperado:</strong> Nova janela √© aberta, handle √© obtido, foco muda para nova janela</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Valida√ß√£o em Nova Janela</h5>
              <p><strong>O que fazer:</strong> Mudar para nova janela e validar conte√∫do espec√≠fico</p>
              <p><strong>Resultado Esperado:</strong> Conte√∫do da nova janela √© validado corretamente</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Fechamento e Retorno</h5>
              <p><strong>O que fazer:</strong> Fechar nova janela e retornar para janela original</p>
              <p><strong>Resultado Esperado:</strong> Nova janela fecha, controle retorna para original</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: M√∫ltiplas Janelas Simult√¢neas</h5>
              <p><strong>O que fazer:</strong> Abrir 3 janelas, alternar entre elas, validar conte√∫do em cada uma</p>
              <p><strong>Resultado Esperado:</strong> Todas as janelas s√£o gerenciadas corretamente</p>
              <p><strong>Desafio:</strong> Criar fun√ß√£o que itere por todas as janelas e valide conte√∫do</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>Handle Atual:</strong> <code>driver.current_window_handle</code></li>
                <li><strong>Todos Handles:</strong> <code>driver.window_handles</code> (retorna lista)</li>
                <li><strong>Mudar Janela:</strong> <code>driver.switch_to.window(handle)</code></li>
                <li><strong>Fechar Janela:</strong> <code>driver.close()</code> (fecha apenas atual)</li>
                <li><strong>Identificar Nova:</strong> Comparar lista antes/depois para encontrar nova janela</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/multiplas-janelas.html" target="_blank">M√∫ltiplas Janelas</a></li>
                <li>Salve handle da janela original: <code>original = driver.current_window_handle</code></li>
                <li>Clique no bot√£o que abre nova janela</li>
                <li>Aguarde nova janela abrir (pode haver delay)</li>
                <li>Obtenha todos os handles: <code>all_windows = driver.window_handles</code></li>
                <li>Identifique nova janela: <code>new_window = [w for w in all_windows if w != original][0]</code></li>
                <li>Mude para nova janela: <code>driver.switch_to.window(new_window)</code></li>
                <li>Valide conte√∫do na nova janela</li>
                <li>Feche nova janela: <code>driver.close()</code></li>
                <li>Volte para original: <code>driver.switch_to.window(original)</code></li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-5">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-5" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-5-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-5-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-5-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-5-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-5-robot">Robot Framework</button>
                </div>
                <div id="code-senior-5-cypress" class="code-content active">
                  <pre><code>it('deve gerenciar m√∫ltiplas janelas', () => {
  cy.visit('/pages/senior/dinamicos/multiplas-janelas.html')
  
  // Salva URL original
  cy.url().then(originalUrl => {
    // Remove target para abrir na mesma janela (Cypress limita m√∫ltiplas janelas)
    cy.get('[data-testid="btn-open-window"]')
      .invoke('removeAttr', 'target')
      .click()
    
    // Alternativamente, usa window.open via JavaScript
    cy.window().then(win => {
      const newWindow = win.open('/nova-pagina.html')
      cy.wrap(newWindow).should('exist')
    })
  })
})

// Cypress tem limita√ß√µes com m√∫ltiplas janelas
// Para testes completos, considere usar cy.origin()</code></pre>
                </div>
                <div id="code-senior-5-playwright" class="code-content">
                  <pre><code>test('deve gerenciar m√∫ltiplas janelas', async ({ page, context }) => {
  await page.goto('/pages/senior/dinamicos/multiplas-janelas.html')
  
  // Aguarda nova janela ser aberta
  const [newPage] = await Promise.all([
    context.waitForEvent('page'),
    page.getByTestId('btn-open-window').click()
  ])
  
  // Valida conte√∫do na nova janela
  await expect(newPage.locator('h1')).toContainText('Nova Janela')
  
  // Fecha nova janela
  await newPage.close()
  
  // Continua na janela original
  await expect(page.locator('h1')).toContainText('Original')
})</code></pre>
                </div>
                <div id="code-senior-5-selenium" class="code-content">
                  <pre><code>@Test
public void testMultiplasJanelas() {
    driver.get("http://localhost/pages/senior/dinamicos/multiplas-janelas.html");
    
    // Salva handle original
    String originalWindow = driver.getWindowHandle();
    
    // Clica bot√£o que abre nova janela
    driver.findElement(By.cssSelector("[data-testid='btn-open-window']")).click();
    
    // Aguarda nova janela aparecer
    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));
    wait.until(d -> driver.getWindowHandles().size() > 1);
    
    // Identifica nova janela
    Set<String> allWindows = driver.getWindowHandles();
    String newWindow = allWindows.stream()
        .filter(w -> !w.equals(originalWindow))
        .findFirst()
        .orElseThrow();
    
    // Muda para nova janela
    driver.switchTo().window(newWindow);
    
    // Valida conte√∫do
    WebElement title = driver.findElement(By.tagName("h1"));
    assertTrue(title.getText().contains("Nova Janela"));
    
    // Fecha nova janela
    driver.close();
    
    // Volta para original
    driver.switchTo().window(originalWindow);
    
    // Valida que est√° na original
    assertTrue(driver.getCurrentUrl().contains("multiplas-janelas"));
}

// Helper que garante limpeza
public void withNewWindow(Runnable action) {
    String original = driver.getWindowHandle();
    try {
        action.run();
    } finally {
        // Fecha todas as janelas exceto original
        Set<String> allWindows = driver.getWindowHandles();
        for (String window : allWindows) {
            if (!window.equals(original)) {
                driver.switchTo().window(window);
                driver.close();
            }
        }
        driver.switchTo().window(original);
    }
}</code></pre>
                </div>
                <div id="code-senior-5-capybara" class="code-content">
                  <pre><code>scenario 'deve gerenciar m√∫ltiplas janelas' do
  visit '/pages/senior/dinamicos/multiplas-janelas.html'
  
  # Salva janela original
  original_window = page.driver.browser.window_handles.first
  
  # Clica bot√£o
  click_button 'Abrir Nova Janela'
  
  # Aguarda nova janela
  sleep 1
  new_window = (page.driver.browser.window_handles - [original_window]).first
  
  # Muda para nova janela
  page.driver.browser.switch_to.window(new_window)
  
  # Valida conte√∫do
  expect(page).to have_content('Nova Janela')
  
  # Fecha e volta
  page.driver.browser.close
  page.driver.browser.switch_to.window(original_window)
end</code></pre>
                </div>
                <div id="code-senior-5-robot" class="code-content">
                  <pre><code>*** Test Cases ***
Gerenciar Multiplas Janelas
    Go To    http://localhost/pages/senior/dinamicos/multiplas-janelas.html
    ${original}=    Get Window Handles
    Click Element    css:[data-testid="btn-open-window"]
    Sleep    1s
    ${all}=    Get Window Handles
    ${new}=    Evaluate    [w for w in ${all} if w != ${original}[0]][0]
    Switch Window    ${new}
    Element Should Contain    css:h1    Nova Janela
    Close Window
    Switch Window    ${original}[0]</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 6: API Testing -->
          <div class="subsection challenge-section">
            <h3>Desafio 6: Valida√ß√£o de Chamadas de API e Respostas</h3>
            <p><strong>Objetivo:</strong> Interceptar, validar e mockar requisi√ß√µes HTTP, respostas de API, c√≥digos de status e tempo de resposta. Criar testes que validem tanto a chamada quanto a atualiza√ß√£o da UI.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>Intercepta√ß√£o:</strong> Deve capturar requisi√ß√µes antes de serem enviadas</li>
                <li><strong>Valida√ß√£o Request:</strong> M√©todo HTTP, URL, headers, body devem ser validados</li>
                <li><strong>Valida√ß√£o Response:</strong> Status code, body JSON, headers de resposta devem ser validados</li>
                <li><strong>Tempo de Resposta:</strong> API deve responder em menos de 2 segundos</li>
                <li><strong>Cen√°rios de Erro:</strong> Deve testar 400, 401, 500 e validar tratamento de erro na UI</li>
                <li><strong>UI Sync:</strong> Interface deve refletir corretamente o estado da resposta da API</li>
                <li><strong>Desafio Extra:</strong> Criar mocks para testar diferentes cen√°rios sem depender do backend real</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Interceptar Requisi√ß√£o GET</h5>
              <p><strong>O que fazer:</strong> Interceptar requisi√ß√£o GET e validar URL, headers e m√©todo</p>
              <p><strong>Resultado Esperado:</strong> Requisi√ß√£o √© capturada, m√©todo √© GET, URL est√° correta</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Validar Resposta de Sucesso</h5>
              <p><strong>O que fazer:</strong> Interceptar resposta 200 e validar body JSON e status code</p>
              <p><strong>Resultado Esperado:</strong> Status 200, body JSON v√°lido, UI atualizada corretamente</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Validar Resposta de Erro</h5>
              <p><strong>O que fazer:</strong> Simular resposta 400 ou 500 e validar tratamento na UI</p>
              <p><strong>Resultado Esperado:</strong> Mensagem de erro aparece na UI, estado √© atualizado</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: Validar Tempo de Resposta</h5>
              <p><strong>O que fazer:</strong> Medir tempo entre requisi√ß√£o e resposta</p>
              <p><strong>Resultado Esperado:</strong> Tempo de resposta est√° dentro do limite aceit√°vel</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 5: Mock de Resposta</h5>
              <p><strong>O que fazer:</strong> Interceptar requisi√ß√£o e retornar resposta mockada</p>
              <p><strong>Resultado Esperado:</strong> UI atualiza com dados mockados, teste n√£o depende de backend</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>CDP Network:</strong> Use Chrome DevTools Protocol para interceptar requisi√ß√µes</li>
                <li><strong>Request Listener:</strong> Configure listener para capturar requisi√ß√µes</li>
                <li><strong>Response Listener:</strong> Configure listener para capturar respostas</li>
                <li><strong>UI Elements:</strong> Ap√≥s resposta, valide elementos que refletem o estado da API</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/apis/api.html" target="_blank">API Testing</a></li>
                <li>Configure intercepta√ß√£o de rede usando CDP ou biblioteca apropriada</li>
                <li>Execute a√ß√£o que dispara chamada de API (ex: clicar bot√£o)</li>
                <li>Capture a requisi√ß√£o: valide m√©todo, URL, headers, body</li>
                <li>Capture a resposta: valide status code, body JSON, headers</li>
                <li>Valide que UI foi atualizada baseada na resposta</li>
                <li>Teste cen√°rio de erro simulando resposta 400/500</li>
                <li>Me√ßa tempo de resposta e valide que est√° dentro do limite</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-6">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-6" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-6-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-6-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-6-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-6-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-6-robot">Robot Framework</button>
                </div>
                <div id="code-senior-6-cypress" class="code-content active">
                  <pre><code>it('deve interceptar e validar chamada de API', () => {
  cy.visit('/pages/senior/apis/api.html')
  
  // Intercepta requisi√ß√£o
  cy.intercept('GET', '/api/users', { fixture: 'users.json' }).as('getUsers')
  
  // Dispara a√ß√£o
  cy.get('[data-testid="btn-fetch"]').click()
  
  // Aguarda requisi√ß√£o
  cy.wait('@getUsers').then(interception => {
    // Valida requisi√ß√£o
    expect(interception.request.method).to.equal('GET')
    expect(interception.request.url).to.include('/api/users')
    
    // Valida resposta
    expect(interception.response.statusCode).to.equal(200)
    expect(interception.response.body).to.have.property('data')
  })
  
  // Valida UI atualizada
  cy.get('[data-testid="api-result"]').should('contain', 'sucesso')
})

// Mock de resposta de erro
it('deve tratar erro da API', () => {
  cy.intercept('GET', '/api/users', { statusCode: 500 }).as('getUsersError')
  cy.visit('/pages/senior/apis/api.html')
  cy.get('[data-testid="btn-fetch"]').click()
  cy.wait('@getUsersError')
  cy.get('[data-testid="error-message"]').should('be.visible')
})</code></pre>
                </div>
                <div id="code-senior-6-playwright" class="code-content">
                  <pre><code>test('deve interceptar e validar API', async ({ page }) => {
  await page.goto('/pages/senior/apis/api.html')
  
  // Intercepta requisi√ß√£o
  const [response] = await Promise.all([
    page.waitForResponse(resp => resp.url().includes('/api/users')),
    page.getByTestId('btn-fetch').click()
  ])
  
  // Valida resposta
  expect(response.status()).toBe(200)
  const body = await response.json()
  expect(body).toHaveProperty('data')
  
  // Valida UI
  await expect(page.getByTestId('api-result')).toContainText('sucesso')
})

// Mock de resposta
test('mock de resposta', async ({ page }) => {
  await page.route('**/api/users', route => {
    route.fulfill({
      status: 200,
      body: JSON.stringify({ data: [{ id: 1, name: 'Mock User' }] })
    })
  })
  
  await page.goto('/pages/senior/apis/api.html')
  await page.getByTestId('btn-fetch').click()
  await expect(page.getByTestId('api-result')).toContainText('Mock User')
})</code></pre>
                </div>
                <div id="code-senior-6-selenium" class="code-content">
                  <pre><code>@Test
public void testAPIIntersection() {
    ChromeDriver driver = new ChromeDriver();
    DevTools devTools = driver.getDevTools();
    devTools.createSession();
    
    // Habilita Network domain
    devTools.send(Network.enable(Optional.empty(), Optional.empty(), Optional.empty()));
    
    // Listener para requisi√ß√µes
    AtomicReference<String> requestUrl = new AtomicReference<>();
    devTools.addListener(Network.requestWillBeSent(), request -> {
        requestUrl.set(request.getRequest().getUrl());
    });
    
    // Listener para respostas
    AtomicInteger statusCode = new AtomicInteger();
    devTools.addListener(Network.responseReceived(), response -> {
        statusCode.set(response.getResponse().getStatus().intValue());
    });
    
    driver.get("http://localhost/pages/senior/apis/api.html");
    driver.findElement(By.cssSelector("[data-testid='btn-fetch']")).click();
    
    // Aguarda resposta
    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));
    wait.until(d -> statusCode.get() > 0);
    
    // Valida
    assertTrue(requestUrl.get().contains("/api/users"));
    assertEquals(200, statusCode.get());
    
    // Valida UI
    WebElement result = driver.findElement(By.cssSelector("[data-testid='api-result']"));
    assertTrue(result.getText().contains("sucesso"));
}</code></pre>
                </div>
                <div id="code-senior-6-capybara" class="code-content">
                  <pre><code>scenario 'deve interceptar API' do
  visit '/pages/senior/apis/api.html'
  
  # Capybara n√£o tem intercepta√ß√£o nativa
  # Use biblioteca externa ou valide apenas UI
  click_button 'Buscar'
  
  # Aguarda UI atualizar
  expect(page).to have_selector('[data-testid="api-result"]', 
    text: 'sucesso', wait: 5)
end

# Para intercepta√ß√£o, use selenium-wire ou similar
# require 'selenium-webdriver'
# require 'selenium/webdriver/chrome'
# 
# options = Selenium::WebDriver::Chrome::Options.new
# driver = Selenium::WebDriver.for :chrome, options: options
# # Configure intercepta√ß√£o via CDP</code></pre>
                </div>
                <div id="code-senior-6-robot" class="code-content">
                  <pre><code>*** Settings ***
Library    RequestsLibrary

*** Test Cases ***
Validar Chamada API
    Go To    http://localhost/pages/senior/apis/api.html
    Click Element    css:[data-testid="btn-fetch"]
    Wait Until Element Is Visible    css:[data-testid="api-result"]    timeout=5s
    Element Should Contain    css:[data-testid="api-result"]    sucesso

# Para intercepta√ß√£o completa, use bibliotecas externas
# ou valide apenas a UI ap√≥s chamada</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 7: Autentica√ß√£o HTTP Basic/Digest -->
          <div class="subsection challenge-section">
            <h3>Desafio 7: Autentica√ß√£o HTTP Basic e Digest</h3>
            <p><strong>Objetivo:</strong> Testar acesso a p√°ginas protegidas por autentica√ß√£o HTTP Basic e Digest usando Chrome DevTools Protocol. Criar helpers reutiliz√°veis para autentica√ß√£o.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>HTTP Basic:</strong> Credenciais s√£o enviadas em header Authorization: Basic base64(user:pass)</li>
                <li><strong>HTTP Digest:</strong> Usa challenge-response com nonce, mais seguro que Basic</li>
                <li><strong>Popup do Navegador:</strong> Navegador mostra popup de autentica√ß√£o se credenciais n√£o forem fornecidas</li>
                <li><strong>CDP:</strong> Chrome DevTools Protocol permite definir headers antes de navegar</li>
                <li><strong>Seguran√ßa:</strong> Credenciais nunca devem ser hardcoded - usar vari√°veis de ambiente</li>
                <li><strong>Desafio Extra:</strong> Criar fun√ß√£o helper que funcione tanto com Basic quanto Digest</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Acesso sem Credenciais</h5>
              <p><strong>O que fazer:</strong> Tentar acessar URL protegida sem fornecer credenciais</p>
              <p><strong>Resultado Esperado:</strong> Popup de autentica√ß√£o aparece ou acesso √© negado</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Autentica√ß√£o Basic com Credenciais V√°lidas</h5>
              <p><strong>O que fazer:</strong> Fornecer credenciais v√°lidas via CDP antes de navegar</p>
              <p><strong>Resultado Esperado:</strong> Acesso √© concedido, conte√∫do protegido √© exibido</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Autentica√ß√£o com Credenciais Inv√°lidas</h5>
              <p><strong>O que fazer:</strong> Fornecer credenciais incorretas</p>
              <p><strong>Resultado Esperado:</strong> Acesso √© negado, conte√∫do protegido n√£o √© exibido</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: Autentica√ß√£o Digest</h5>
              <p><strong>O que fazer:</strong> Testar autentica√ß√£o Digest (mais complexa que Basic)</p>
              <p><strong>Resultado Esperado:</strong> Fluxo de challenge-response funciona corretamente</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>CDP Network:</strong> Use <code>Network.setExtraHTTPHeaders</code> para definir Authorization header</li>
                <li><strong>Base64 Encoding:</strong> Credenciais Basic devem ser: <code>base64(username:password)</code></li>
                <li><strong>Conte√∫do Protegido:</strong> Ap√≥s autentica√ß√£o, valide elementos que s√≥ aparecem quando autenticado</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/autenticacao-basica.html" target="_blank">Autentica√ß√£o B√°sica</a></li>
                <li>Tente acessar sem credenciais ‚Üí Verifique popup ou nega√ß√£o de acesso</li>
                <li>Configure CDP antes de navegar: habilite Network domain</li>
                <li>Encode credenciais em Base64: <code>base64("admin:admin")</code></li>
                <li>Defina header Authorization: <code>Basic YWRtaW46YWRtaW4=</code></li>
                <li>Navegue para URL protegida ‚Üí Conte√∫do deve aparecer</li>
                <li>Valide que conte√∫do protegido √© exibido</li>
                <li>Teste com credenciais inv√°lidas ‚Üí Acesso deve ser negado</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-7">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-7" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-7-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-7-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-7-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-7-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-7-robot">Robot Framework</button>
                </div>
                <div id="code-senior-7-cypress" class="code-content active">
                  <pre><code>it('deve autenticar com HTTP Basic', () => {
  const username = 'admin'
  const password = 'admin'
  const auth = btoa(`${username}:${password}`)
  
  cy.visit('/pages/senior/dinamicos/autenticacao-basica.html', {
    auth: { username, password }
  })
  
  // Valida conte√∫do protegido
  cy.get('[data-testid="protected-content"]').should('be.visible')
})</code></pre>
                </div>
                <div id="code-senior-7-playwright" class="code-content">
                  <pre><code>test('deve autenticar com HTTP Basic', async ({ page }) => {
  const username = 'admin'
  const password = 'admin'
  
  // Playwright suporta HTTP auth nativo
  await page.goto('/pages/senior/dinamicos/autenticacao-basica.html', {
    waitUntil: 'networkidle'
  })
  
  // Ou use setExtraHTTPHeaders via CDP
  await page.setExtraHTTPHeaders({
    'Authorization': `Basic ${Buffer.from(`${username}:${password}`).toString('base64')}`
  })
  
  await expect(page.getByTestId('protected-content')).toBeVisible()
})</code></pre>
                </div>
                <div id="code-senior-7-selenium" class="code-content">
                  <pre><code>@Test
public void testHTTPBasicAuth() {
    ChromeDriver driver = new ChromeDriver();
    DevTools devTools = driver.getDevTools();
    devTools.createSession();
    
    // Habilita Network
    devTools.send(Network.enable(Optional.empty(), Optional.empty(), Optional.empty()));
    
    // Define credenciais
    String username = "admin";
    String password = "admin";
    String auth = Base64.getEncoder().encodeToString(
        (username + ":" + password).getBytes());
    
    // Define header antes de navegar
    Map<String, Object> headers = new HashMap<>();
    headers.put("Authorization", "Basic " + auth);
    devTools.send(Network.setExtraHTTPHeaders(new Headers(headers)));
    
    // Navega
    driver.get("http://localhost/pages/senior/dinamicos/autenticacao-basica.html");
    
    // Valida conte√∫do protegido
    WebElement content = driver.findElement(By.cssSelector("[data-testid='protected-content']"));
    assertTrue(content.isDisplayed());
}</code></pre>
                </div>
                <div id="code-senior-7-capybara" class="code-content">
                  <pre><code>scenario 'deve autenticar com HTTP Basic' do
  username = 'admin'
  password = 'admin'
  auth = Base64.strict_encode64("#{username}:#{password}")
  
  # Capybara com Selenium
  page.driver.browser.manage.add_authentication('http://localhost', username, password)
  
  visit '/pages/senior/dinamicos/autenticacao-basica.html'
  
  expect(page).to have_selector('[data-testid="protected-content"]', visible: true)
end</code></pre>
                </div>
                <div id="code-senior-7-robot" class="code-content">
                  <pre><code>*** Test Cases ***
Autenticacao HTTP Basic
    ${auth}=    Evaluate    base64.b64encode(b'admin:admin').decode()    modules=base64
    Go To    http://localhost/pages/senior/dinamicos/autenticacao-basica.html
    # Para autentica√ß√£o completa, use biblioteca externa ou CDP</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 8: Dynamic IDs -->
          <div class="subsection challenge-section">
            <h3>Desafio 8: Elementos com IDs Din√¢micos</h3>
            <p><strong>Objetivo:</strong> Localizar elementos com IDs gerados dinamicamente que mudam a cada carregamento. Criar estrat√©gias robustas de localiza√ß√£o que n√£o dependam de IDs.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>IDs Din√¢micos:</strong> IDs s√£o gerados aleatoriamente a cada carregamento (ex: id="button-abc123", id="button-xyz789")</li>
                <li><strong>Atributos Est√°ticos:</strong> Outros atributos (class, data-*, role, text) permanecem constantes</li>
                <li><strong>Estrutura:</strong> Posi√ß√£o relativa na estrutura HTML pode mudar ligeiramente</li>
                <li><strong>Desafio:</strong> Criar seletores que funcionem mesmo se estrutura HTML mudar</li>
                <li><strong>Boas Pr√°ticas:</strong> Priorizar data-testid > atributos est√°ticos > XPath com texto > posi√ß√£o relativa</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Falha com ID Din√¢mico</h5>
              <p><strong>O que fazer:</strong> Tentar localizar usando ID que muda a cada carregamento</p>
              <p><strong>Resultado Esperado:</strong> Localiza√ß√£o falha ap√≥s recarregar p√°gina</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Localiza√ß√£o por data-testid</h5>
              <p><strong>O que fazer:</strong> Localizar usando data-testid que permanece constante</p>
              <p><strong>Resultado Esperado:</strong> Localiza√ß√£o funciona mesmo ap√≥s recarregar</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Localiza√ß√£o por Atributos Est√°ticos</h5>
              <p><strong>O que fazer:</strong> Localizar usando combina√ß√£o de atributos est√°ticos (class, type, role)</p>
              <p><strong>Resultado Esperado:</strong> Localiza√ß√£o funciona independente do ID</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: XPath com Texto</h5>
              <p><strong>O que fazer:</strong> Localizar usando XPath que busca por texto do elemento</p>
              <p><strong>Resultado Esperado:</strong> Localiza√ß√£o funciona se texto n√£o mudar</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 5: Valida√ß√£o de Robustez</h5>
              <p><strong>O que fazer:</strong> Recarregar p√°gina 5 vezes e validar que seletor ainda funciona</p>
              <p><strong>Resultado Esperado:</strong> Seletor robusto funciona em todas as tentativas</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>Evitar:</strong> <code>id="button-abc123"</code> (ID din√¢mico)</li>
                <li><strong>Recomendado:</strong> <code>[data-testid="save-button"]</code> (data-testid est√°tico)</li>
                <li><strong>Alternativa 1:</strong> <code>button[type="submit"][class="btn-primary"]</code> (atributos est√°ticos)</li>
                <li><strong>Alternativa 2:</strong> <code>//button[contains(text(), 'Salvar')]</code> (XPath com texto)</li>
                <li><strong>Alternativa 3:</strong> <code>//form//button[@type='submit']</code> (XPath relativo)</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/id-dinamico.html" target="_blank">ID Din√¢mico</a></li>
                <li>Inspecione elemento e anote o ID atual (ex: id="btn-abc123")</li>
                <li>Recarregue a p√°gina ‚Üí Verifique que ID mudou (ex: id="btn-xyz789")</li>
                <li>Identifique atributos est√°ticos do elemento (class, data-*, type, text)</li>
                <li>Crie seletor usando data-testid: <code>[data-testid="action-button"]</code></li>
                <li>Se n√£o houver data-testid, use atributos: <code>button[type="submit"].btn-primary</code></li>
                <li>Teste seletor recarregando p√°gina m√∫ltiplas vezes ‚Üí Deve funcionar sempre</li>
                <li>Valide que elemento √© encontrado corretamente em todas as tentativas</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-8">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-8" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-8-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-8-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-8-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-8-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-8-robot">Robot Framework</button>
                </div>
                <div id="code-senior-8-cypress" class="code-content active">
                  <pre><code>it('deve localizar elemento com ID din√¢mico', () => {
  cy.visit('/pages/senior/dinamicos/id-dinamico.html')
  
  // Usa data-testid (recomendado)
  cy.get('[data-testid="action-button"]').click()
  
  // Ou usa atributos est√°ticos
  cy.get('button[type="submit"].btn-primary').click()
  
  // Ou XPath com texto
  cy.xpath('//button[contains(text(), "Salvar")]').click()
})

// Testa robustez recarregando
it('seletor robusto funciona ap√≥s recarregar', () => {
  for (let i = 0; i < 5; i++) {
    cy.visit('/pages/senior/dinamicos/id-dinamico.html')
    cy.get('[data-testid="action-button"]').should('exist')
  }
})</code></pre>
                </div>
                <div id="code-senior-8-playwright" class="code-content">
                  <pre><code>test('deve localizar elemento com ID din√¢mico', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/id-dinamico.html')
  
  // Usa data-testid
  await page.getByTestId('action-button').click()
  
  // Ou atributos est√°ticos
  await page.locator('button[type="submit"].btn-primary').click()
  
  // Ou texto
  await page.getByRole('button', { name: 'Salvar' }).click()
})

// Testa robustez
test('seletor robusto ap√≥s recarregar', async ({ page }) => {
  for (let i = 0; i < 5; i++) {
    await page.goto('/pages/senior/dinamicos/id-dinamico.html')
    await expect(page.getByTestId('action-button')).toBeVisible()
  }
})</code></pre>
                </div>
                <div id="code-senior-8-selenium" class="code-content">
                  <pre><code>@Test
public void testDynamicID() {
    driver.get("http://localhost/pages/senior/dinamicos/id-dinamico.html");
    
    // Estrat√©gia 1: data-testid (recomendado)
    WebElement button1 = driver.findElement(By.cssSelector("[data-testid='action-button']"));
    
    // Estrat√©gia 2: atributos est√°ticos
    WebElement button2 = driver.findElement(By.cssSelector("button[type='submit'].btn-primary"));
    
    // Estrat√©gia 3: XPath com texto
    WebElement button3 = driver.findElement(By.xpath("//button[contains(text(), 'Salvar')]"));
    
    // Todas devem funcionar
    assertNotNull(button1);
    assertNotNull(button2);
    assertNotNull(button3);
}

// Testa robustez
@Test
public void testRobustezSeletor() {
    for (int i = 0; i < 5; i++) {
        driver.get("http://localhost/pages/senior/dinamicos/id-dinamico.html");
        WebElement button = driver.findElement(By.cssSelector("[data-testid='action-button']"));
        assertTrue(button.isDisplayed());
    }
}</code></pre>
                </div>
                <div id="code-senior-8-capybara" class="code-content">
                  <pre><code>scenario 'deve localizar elemento com ID din√¢mico' do
  visit '/pages/senior/dinamicos/id-dinamico.html'
  
  # Estrat√©gia 1: data-testid
  find('[data-testid="action-button"]').click
  
  # Estrat√©gia 2: atributos
  find('button[type="submit"].btn-primary').click
  
  # Estrat√©gia 3: texto
  click_button 'Salvar'
end

# Testa robustez
scenario 'seletor robusto' do
  5.times do
    visit '/pages/senior/dinamicos/id-dinamico.html'
    expect(page).to have_selector('[data-testid="action-button"]')
  end
end</code></pre>
                </div>
                <div id="code-senior-8-robot" class="code-content">
                  <pre><code>*** Test Cases ***
Localizar Com ID Dinamico
    Go To    http://localhost/pages/senior/dinamicos/id-dinamico.html
    Click Element    css:[data-testid="action-button"]
    # Ou
    Click Element    css:button[type="submit"].btn-primary
    # Ou
    Click Button    Salvar

Testar Robustez
    FOR    ${i}    IN RANGE    5
        Go To    http://localhost/pages/senior/dinamicos/id-dinamico.html
        Element Should Be Visible    css:[data-testid="action-button"]
    END</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 9: JavaScript Errors -->
          <div class="subsection challenge-section">
            <h3>Desafio 9: Captura e Valida√ß√£o de Erros JavaScript</h3>
            <p><strong>Objetivo:</strong> Detectar, capturar e validar erros JavaScript que ocorrem durante execu√ß√£o de testes. Criar sistema de monitoramento de erros para garantir qualidade.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>Tipos de Erro:</strong> ReferenceError, TypeError, SyntaxError, etc.</li>
                <li><strong>N√≠veis de Log:</strong> SEVERE (erros cr√≠ticos), WARNING (avisos), INFO (informa√ß√µes)</li>
                <li><strong>Erros Esperados:</strong> Alguns erros podem ser esperados em testes negativos</li>
                <li><strong>Filtragem:</strong> Deve filtrar erros esperados dos erros reais</li>
                <li><strong>Reporte:</strong> Todos os erros devem ser reportados para an√°lise</li>
                <li><strong>Desafio Extra:</strong> Criar helper que capture, filtre e reporte erros automaticamente</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Capturar Erros SEVERE</h5>
              <p><strong>O que fazer:</strong> Configurar logging e capturar apenas erros SEVERE</p>
              <p><strong>Resultado Esperado:</strong> Apenas erros cr√≠ticos s√£o capturados</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Validar Aus√™ncia de Erros</h5>
              <p><strong>O que fazer:</strong> Executar teste e verificar que n√£o h√° erros JavaScript</p>
              <p><strong>Resultado Esperado:</strong> Lista de erros SEVERE est√° vazia</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Filtrar Erros Esperados</h5>
              <p><strong>O que fazer:</strong> Em teste negativo, filtrar erros esperados dos erros reais</p>
              <p><strong>Resultado Esperado:</strong> Apenas erros n√£o esperados s√£o reportados</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: Captura via CDP</h5>
              <p><strong>O que fazer:</strong> Usar Chrome DevTools Protocol para capturar exceptions</p>
              <p><strong>Resultado Esperado:</strong> Erros s√£o capturados em tempo real via CDP</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>Browser Logs:</strong> <code>driver.get_log('browser')</code> retorna logs do console</li>
                <li><strong>Filtrar SEVERE:</strong> Filtrar logs por n√≠vel 'SEVERE'</li>
                <li><strong>CDP Runtime:</strong> <code>Runtime.enable</code> para capturar exceptions</li>
                <li><strong>window.onerror:</strong> Verificar via JavaScript se h√° erros n√£o tratados</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/js-error.html" target="_blank">JavaScript Error</a></li>
                <li>Configure logging antes de navegar: habilite browser logs</li>
                <li>Execute a√ß√µes na p√°gina que podem gerar erros</li>
                <li>Obtenha logs: <code>logs = driver.get_log('browser')</code></li>
                <li>Filtre erros SEVERE: <code>errors = [log for log in logs if log['level'] == 'SEVERE']</code></li>
                <li>Valide que n√£o h√° erros (ou que erros esperados s√£o capturados)</li>
                <li>Use CDP para captura mais avan√ßada se necess√°rio</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-9">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-9" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-9-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-9-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-9-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-9-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-9-robot">Robot Framework</button>
                </div>
                <div id="code-senior-9-cypress" class="code-content active">
                  <pre><code>it('deve capturar erros JavaScript', () => {
  cy.visit('/pages/senior/dinamicos/js-error.html', {
    onBeforeLoad(win) {
      // Captura erros
      cy.stub(win.console, 'error').as('consoleError')
    }
  })
  
  // Executa a√ß√£o que pode gerar erro
  cy.get('[data-testid="btn-trigger-error"]').click()
  
  // Valida que erro foi capturado
  cy.get('@consoleError').should('have.been.called')
})

// Valida aus√™ncia de erros
it('n√£o deve ter erros JavaScript', () => {
  const errors = []
  
  cy.visit('/pages/senior/dinamicos/js-error.html', {
    onBeforeLoad(win) {
      win.addEventListener('error', (e) => {
        errors.push(e.message)
      })
    }
  })
  
  cy.then(() => {
    expect(errors.length).to.equal(0)
  })
})</code></pre>
                </div>
                <div id="code-senior-9-playwright" class="code-content">
                  <pre><code>test('deve capturar erros JavaScript', async ({ page }) => {
  const errors = []
  
  // Listener para erros
  page.on('console', msg => {
    if (msg.type() === 'error') {
      errors.push(msg.text())
    }
  })
  
  page.on('pageerror', error => {
    errors.push(error.message)
  })
  
  await page.goto('/pages/senior/dinamicos/js-error.html')
  await page.getByTestId('btn-trigger-error').click()
  
  // Valida que erro foi capturado
  expect(errors.length).toBeGreaterThan(0)
})

// Valida aus√™ncia de erros
test('n√£o deve ter erros', async ({ page }) => {
  const errors = []
  page.on('pageerror', e => errors.push(e))
  
  await page.goto('/pages/senior/dinamicos/js-error.html')
  
  expect(errors.length).toBe(0)
})</code></pre>
                </div>
                <div id="code-senior-9-selenium" class="code-content">
                  <pre><code>@Test
public void testJavaScriptErrors() {
    ChromeOptions options = new ChromeOptions();
    LoggingPreferences logs = new LoggingPreferences();
    logs.enable(LogType.BROWSER, Level.ALL);
    options.setCapability("goog:loggingPrefs", logs);
    
    ChromeDriver driver = new ChromeDriver(options);
    driver.get("http://localhost/pages/senior/dinamicos/js-error.html");
    
    // Executa a√ß√£o
    driver.findElement(By.cssSelector("[data-testid='btn-trigger-error']")).click();
    
    // Obt√©m logs
    List<LogEntry> logsList = driver.manage().logs().get(LogType.BROWSER).getAll();
    
    // Filtra erros SEVERE
    List<LogEntry> severeErrors = logsList.stream()
        .filter(log -> log.getLevel() == Level.SEVERE)
        .collect(Collectors.toList());
    
    // Valida que n√£o h√° erros (ou que erros esperados foram capturados)
    assertEquals(0, severeErrors.size());
}

// Helper para capturar erros
public List<String> getJavaScriptErrors(WebDriver driver) {
    return driver.manage().logs().get(LogType.BROWSER).getAll().stream()
        .filter(log -> log.getLevel() == Level.SEVERE)
        .map(LogEntry::getMessage)
        .collect(Collectors.toList());
}</code></pre>
                </div>
                <div id="code-senior-9-capybara" class="code-content">
                  <pre><code>scenario 'deve capturar erros JavaScript' do
  visit '/pages/senior/dinamicos/js-error.html'
  
  # Capybara com Selenium pode acessar logs
  logs = page.driver.browser.manage.logs.get(:browser)
  errors = logs.select { |log| log.level == 'SEVERE' }
  
  # Executa a√ß√£o
  click_button 'Trigger Error'
  
  # Valida erros
  new_logs = page.driver.browser.manage.logs.get(:browser)
  new_errors = new_logs.select { |log| log.level == 'SEVERE' }
  
  expect(new_errors.length).to be > errors.length
end</code></pre>
                </div>
                <div id="code-senior-9-robot" class="code-content">
                  <pre><code>*** Settings ***
Library    SeleniumLibrary

*** Test Cases ***
Capturar Erros JavaScript
    Open Browser    http://localhost/pages/senior/dinamicos/js-error.html    chrome
    ${logs}=    Get Log    browser
    ${errors}=    Evaluate    [log for log in ${logs} if log['level'] == 'SEVERE']
    Should Be Empty    ${errors}</code></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Desafio 10: OAuth2 e Autentica√ß√£o Avan√ßada -->
          <div class="subsection challenge-section">
            <h3>Desafio 10: Fluxo de Autentica√ß√£o OAuth2</h3>
            <p><strong>Objetivo:</strong> Testar fluxo completo de autentica√ß√£o OAuth2 incluindo redirecionamentos, autoriza√ß√£o, tokens e estados. Este √© um dos desafios mais complexos de automa√ß√£o web.</p>
            
            <h4>Regras de Neg√≥cio</h4>
            <div class="challenge-rules">
              <ul>
                <li><strong>Fluxo OAuth2:</strong> Login ‚Üí Redirecionamento ‚Üí Autoriza√ß√£o ‚Üí Callback ‚Üí Token ‚Üí Autenticado</li>
                <li><strong>Redirecionamentos:</strong> M√∫ltiplos redirecionamentos entre aplica√ß√£o e provider</li>
                <li><strong>State Parameter:</strong> Par√¢metro state deve ser validado para prevenir CSRF</li>
                <li><strong>Tokens:</strong> Access token e refresh token devem ser armazenados corretamente</li>
                <li><strong>Timeouts:</strong> Cada etapa pode ter timeout diferente</li>
                <li><strong>Mocks:</strong> Para testes est√°veis, considere mockar o provider OAuth2</li>
                <li><strong>Desafio Extra:</strong> Criar fun√ß√£o que gerencie todo o fluxo OAuth2 automaticamente</li>
              </ul>
            </div>

            <h4>Cen√°rios de Teste</h4>
            
            <div class="challenge-scenario">
              <h5>Cen√°rio 1: Iniciar Fluxo OAuth2</h5>
              <p><strong>O que fazer:</strong> Clicar em bot√£o de login OAuth2 e aguardar redirecionamento</p>
              <p><strong>Resultado Esperado:</strong> Redirecionamento para p√°gina de autoriza√ß√£o do provider</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 2: Autoriza√ß√£o no Provider</h5>
              <p><strong>O que fazer:</strong> Preencher credenciais e autorizar acesso</p>
              <p><strong>Resultado Esperado:</strong> Provider redireciona de volta com c√≥digo de autoriza√ß√£o</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 3: Valida√ß√£o de Token</h5>
              <p><strong>O que fazer:</strong> Validar que token foi recebido e armazenado (localStorage/cookie)</p>
              <p><strong>Resultado Esperado:</strong> Token existe e usu√°rio est√° autenticado</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 4: Nega√ß√£o de Autoriza√ß√£o</h5>
              <p><strong>O que fazer:</strong> Negar autoriza√ß√£o no provider</p>
              <p><strong>Resultado Esperado:</strong> Redirecionamento de volta com erro, usu√°rio n√£o autenticado</p>
            </div>

            <div class="challenge-scenario">
              <h5>Cen√°rio 5: Valida√ß√£o de State</h5>
              <p><strong>O que fazer:</strong> Validar que par√¢metro state √© preservado durante o fluxo</p>
              <p><strong>Resultado Esperado:</strong> State no callback corresponde ao state inicial</p>
            </div>

            <h4>Como Procurar Elementos</h4>
            <div class="challenge-instructions">
              <ul>
                <li><strong>URL Monitoring:</strong> Monitorar <code>driver.current_url</code> para detectar redirecionamentos</li>
                <li><strong>URL Parameters:</strong> Extrair <code>code</code>, <code>state</code>, <code>error</code> da URL de callback</li>
                <li><strong>LocalStorage:</strong> <code>driver.execute_script('return localStorage.getItem("token")')</code></li>
                <li><strong>Cookies:</strong> <code>driver.get_cookies()</code> para verificar cookies de sess√£o</li>
                <li><strong>Wait for URL:</strong> Aguardar URL conter 'callback' ou 'authorize'</li>
              </ul>
            </div>

            <h4>Instru√ß√µes Passo a Passo</h4>
            <div class="challenge-instructions">
              <ol>
                <li>Acesse a p√°gina <a href="../senior/dinamicos/oauth2-providers.html" target="_blank">OAuth2 Providers</a></li>
                <li>Salve URL inicial e state (se vis√≠vel)</li>
                <li>Clique no bot√£o de login OAuth2</li>
                <li>Aguarde redirecionamento: <code>wait.until(lambda d: 'authorize' in d.current_url)</code></li>
                <li>Na p√°gina de autoriza√ß√£o, preencha credenciais (se simulado)</li>
                <li>Clique em "Autorizar"</li>
                <li>Aguarde redirecionamento de volta: <code>wait.until(lambda d: 'callback' in d.current_url)</code></li>
                <li>Extraia c√≥digo/token da URL: <code>code = parse_qs(urlparse(driver.current_url).query)['code'][0]</code></li>
                <li>Valide token em localStorage ou cookies</li>
                <li>Valide que usu√°rio est√° autenticado (elementos espec√≠ficos aparecem)</li>
              </ol>
            </div>

            <h4>Exemplo de Automa√ß√£o</h4>
            <div class="code-reveal-container">
              <button class="code-reveal-button" data-target="code-senior-10">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver Exemplos de C√≥digo
              </button>
              <div id="code-senior-10" class="code-tabs-container">
                <div class="code-tabs">
                  <button class="code-tab active" data-target="code-senior-10-cypress">Cypress</button>
                  <button class="code-tab" data-target="code-senior-10-playwright">Playwright</button>
                  <button class="code-tab" data-target="code-senior-10-selenium">Selenium (Java)</button>
                  <button class="code-tab" data-target="code-senior-10-capybara">Capybara (Ruby)</button>
                  <button class="code-tab" data-target="code-senior-10-robot">Robot Framework</button>
                </div>
                <div id="code-senior-10-cypress" class="code-content active">
                  <pre><code>it('deve completar fluxo OAuth2', () => {
  cy.visit('/pages/senior/dinamicos/oauth2-providers.html')
  
  // Clica login
  cy.get('[data-testid="btn-oauth-login"]').click()
  
  // Aguarda redirecionamento
  cy.url().should('include', 'authorize')
  
  // Preenche credenciais (se simulado)
  cy.get('input[name="username"]').type('user')
  cy.get('input[name="password"]').type('pass')
  cy.get('button[type="submit"]').click()
  
  // Aguarda callback
  cy.url().should('include', 'callback')
  cy.url().should('include', 'code=')
  
  // Valida token
  cy.window().then(win => {
    const token = win.localStorage.getItem('token')
    expect(token).to.exist
  })
  
  // Valida autenticado
  cy.get('[data-testid="user-authenticated"]').should('be.visible')
})</code></pre>
                </div>
                <div id="code-senior-10-playwright" class="code-content">
                  <pre><code>test('deve completar fluxo OAuth2', async ({ page }) => {
  await page.goto('/pages/senior/dinamicos/oauth2-providers.html')
  
  // Clica login
  await page.getByTestId('btn-oauth-login').click()
  
  // Aguarda redirecionamento
  await page.waitForURL('**/authorize**')
  
  // Preenche credenciais
  await page.fill('input[name="username"]', 'user')
  await page.fill('input[name="password"]', 'pass')
  await page.click('button[type="submit"]')
  
  // Aguarda callback
  await page.waitForURL('**/callback**')
  expect(page.url()).toContain('code=')
  
  // Valida token
  const token = await page.evaluate(() => localStorage.getItem('token'))
  expect(token).toBeTruthy()
  
  // Valida autenticado
  await expect(page.getByTestId('user-authenticated')).toBeVisible()
})</code></pre>
                </div>
                <div id="code-senior-10-selenium" class="code-content">
                  <pre><code>@Test
public void testOAuth2Flow() {
    driver.get("http://localhost/pages/senior/dinamicos/oauth2-providers.html");
    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(30));
    
    // Clica login
    driver.findElement(By.cssSelector("[data-testid='btn-oauth-login']")).click();
    
    // Aguarda redirecionamento para authorize
    wait.until(ExpectedConditions.urlContains("authorize"));
    
    // Preenche credenciais
    driver.findElement(By.name("username")).sendKeys("user");
    driver.findElement(By.name("password")).sendKeys("pass");
    driver.findElement(By.cssSelector("button[type='submit']")).click();
    
    // Aguarda callback
    wait.until(ExpectedConditions.urlContains("callback"));
    String currentUrl = driver.getCurrentUrl();
    assertTrue(currentUrl.contains("code="));
    
    // Extrai c√≥digo
    String code = extractCodeFromUrl(currentUrl);
    assertNotNull(code);
    
    // Valida token
    JavascriptExecutor js = (JavascriptExecutor) driver;
    String token = (String) js.executeScript("return localStorage.getItem('token')");
    assertNotNull(token);
    
    // Valida autenticado
    WebElement authenticated = driver.findElement(By.cssSelector("[data-testid='user-authenticated']"));
    assertTrue(authenticated.isDisplayed());
}

private String extractCodeFromUrl(String url) {
    // Extrai c√≥digo da URL
    String[] parts = url.split("code=");
    if (parts.length > 1) {
        return parts[1].split("&")[0];
    }
    return null;
}</code></pre>
                </div>
                <div id="code-senior-10-capybara" class="code-content">
                  <pre><code>scenario 'deve completar fluxo OAuth2' do
  visit '/pages/senior/dinamicos/oauth2-providers.html'
  
  # Clica login
  click_button 'Login com OAuth2'
  
  # Aguarda redirecionamento
  expect(page).to have_current_path(/authorize/, wait: 10)
  
  # Preenche credenciais
  fill_in 'username', with: 'user'
  fill_in 'password', with: 'pass'
  click_button 'Autorizar'
  
  # Aguarda callback
  expect(page).to have_current_path(/callback/, wait: 10)
  expect(page.current_url).to include('code=')
  
  # Valida token
  token = page.evaluate_script("localStorage.getItem('token')")
  expect(token).not_to be_nil
  
  # Valida autenticado
  expect(page).to have_selector('[data-testid="user-authenticated"]', visible: true)
end</code></pre>
                </div>
                <div id="code-senior-10-robot" class="code-content">
                  <pre><code>*** Test Cases ***
Fluxo OAuth2
    Go To    http://localhost/pages/senior/dinamicos/oauth2-providers.html
    Click Element    css:[data-testid="btn-oauth-login"]
    Wait Until Location Contains    authorize    timeout=10s
    Input Text    name:username    user
    Input Text    name:password    pass
    Click Button    Autorizar
    Wait Until Location Contains    callback    timeout=10s
    ${token}=    Execute Javascript    return localStorage.getItem('token');
    Should Not Be Empty    ${token}
    Element Should Be Visible    css:[data-testid="user-authenticated"]</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div style="margin-top: var(--spacing-xl); text-align: center;">
        <a href="index.html" class="btn btn-secondary">‚Üê Voltar para Desafios</a>
        <a href="../../index.html" class="btn btn-secondary" style="margin-left: var(--spacing-md);">‚Üê Voltar para In√≠cio</a>
      </div>
    </main>

    <!-- Dialog de Confirma√ß√£o -->
    <div class="confirm-dialog-overlay" id="confirm-overlay"></div>
    <div class="confirm-dialog" id="confirm-dialog">
      <h3>Mostrar Exemplos de C√≥digo?</h3>
      <p>Os exemplos de c√≥digo podem conter spoilers. Tem certeza que deseja visualizar?</p>
      <div class="confirm-dialog-buttons">
        <button class="btn-cancel" id="confirm-cancel">N√£o</button>
        <button class="btn-confirm" id="confirm-ok">Sim</button>
      </div>
    </div>

    <footer class="site-footer">
      QA Playground ‚Äî Projeto educacional ‚Ä¢ Portugu√™s
    </footer>

    <script src="../../js/app.js"></script>
    <script>
      // Gerenciamento de c√≥digo escondido com confirma√ß√£o
      document.querySelectorAll('.code-reveal-button').forEach(button => {
        button.addEventListener('click', function() {
          const targetId = this.getAttribute('data-target');
          const container = document.getElementById(targetId);
          
          // Se o c√≥digo j√° est√° vis√≠vel, esconde diretamente
          if (container && container.classList.contains('active')) {
            container.classList.remove('active');
            // Atualiza texto do bot√£o
            const svg = this.querySelector('svg');
            this.innerHTML = svg.outerHTML + ' Ver Exemplos de C√≥digo';
            return;
          }
          
          // Se est√° escondido, mostra dialog de confirma√ß√£o
          const overlay = document.getElementById('confirm-overlay');
          const dialog = document.getElementById('confirm-dialog');
          
          overlay.classList.add('active');
          dialog.classList.add('active');
          
          // Salva o target para usar ap√≥s confirma√ß√£o
          dialog.dataset.targetId = targetId;
        });
      });
      
      // Bot√£o Sim - mostra c√≥digo
      document.getElementById('confirm-ok').addEventListener('click', function() {
        const dialog = document.getElementById('confirm-dialog');
        const targetId = dialog.dataset.targetId;
        const container = document.getElementById(targetId);
        const overlay = document.getElementById('confirm-overlay');
        const button = document.querySelector(`[data-target="${targetId}"]`);
        
        if (container) {
          container.classList.add('active');
          // Atualiza texto do bot√£o
          if (button) {
            const svg = button.querySelector('svg');
            button.innerHTML = svg.outerHTML + ' Esconder Exemplos de C√≥digo';
          }
        }
        
        overlay.classList.remove('active');
        dialog.classList.remove('active');
      });
      
      // Bot√£o N√£o - fecha dialog
      document.getElementById('confirm-cancel').addEventListener('click', function() {
        const overlay = document.getElementById('confirm-overlay');
        const dialog = document.getElementById('confirm-dialog');
        
        overlay.classList.remove('active');
        dialog.classList.remove('active');
      });
      
      // Fecha dialog ao clicar no overlay
      document.getElementById('confirm-overlay').addEventListener('click', function() {
        this.classList.remove('active');
        document.getElementById('confirm-dialog').classList.remove('active');
      });
      
      // Gerenciamento de tabs de c√≥digo
      document.querySelectorAll('.code-tab').forEach(tab => {
        tab.addEventListener('click', function() {
          const targetId = this.getAttribute('data-target');
          const container = this.closest('.code-tabs-container');
          
          // Remove active de todas as tabs e contents
          container.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
          container.querySelectorAll('.code-content').forEach(c => c.classList.remove('active'));
          
          // Adiciona active na tab e content selecionados
          this.classList.add('active');
          const content = container.querySelector('#' + targetId);
          if (content) {
            content.classList.add('active');
          }
        });
      });
    </script>
  </body>
</html>
